<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathematics for AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=DM+Sans:opsz,wght@9..40,400;500;600&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #ffffff;
            color: #1a1a1a;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .font-display {
            font-family: 'DM Sans', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        ::selection {
            background: #e0e7ff;
            color: #1e1b4b;
        }

        /* Progress Bar */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 2px;
            background: #1a1a1a;
            z-index: 1000;
            transform-origin: left;
            transform: scaleX(0);
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 1.5rem 3rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            transform: translateY(-100%);
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .nav.visible {
            transform: translateY(0);
        }

        .nav-link {
            color: #6b7280;
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .nav-link:hover {
            color: #1a1a1a;
            background: rgba(0, 0, 0, 0.03);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .hero-pretitle {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: #9ca3af;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
        }

        .hero-title {
            font-size: clamp(3rem, 10vw, 8rem);
            font-weight: 600;
            line-height: 0.9;
            letter-spacing: -0.04em;
            margin-bottom: 1.5rem;
            opacity: 0;
            transform: translateY(30px);
        }

        .hero-title span {
            display: block;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: #6b7280;
            max-width: 600px;
            line-height: 1.7;
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateY(20px);
        }

        .hero-cta {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2.5rem;
            background: #1a1a1a;
            color: white;
            text-decoration: none;
            border-radius: 100px;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s;
            opacity: 0;
            transform: translateY(20px);
        }

        .hero-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        /* Floating Shapes */
        .float-shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.03;
            pointer-events: none;
        }

        .shape-1 {
            width: 600px;
            height: 600px;
            background: #4f46e5;
            top: -200px;
            right: -200px;
            animation: float 25s ease-in-out infinite;
        }

        .shape-2 {
            width: 400px;
            height: 400px;
            background: #ec4899;
            bottom: -100px;
            left: -100px;
            animation: float 20s ease-in-out infinite reverse;
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            50% {
                transform: translate(40px, -40px) scale(1.1);
            }
        }

        /* Section Styles - Full Width */
        .section {
            width: 100%;
            padding: 8rem 0;
            border-top: 1px solid rgba(0, 0, 0, 0.06);
        }

        .section-alt {
            background: #fafafa;
        }

        .section-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 4rem;
        }

        @media (max-width: 768px) {
            .section-inner {
                padding: 0 1.5rem;
            }

            .nav {
                padding: 1rem;
            }
        }

        .section-header {
            margin-bottom: 5rem;
            max-width: 800px;
        }

        .section-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: #9ca3af;
            margin-bottom: 1rem;
            display: block;
        }

        .section-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 600;
            letter-spacing: -0.02em;
            margin-bottom: 1.5rem;
            color: #1a1a1a;
        }

        .section-desc {
            font-size: 1.25rem;
            color: #6b7280;
            line-height: 1.7;
        }

        /* Topic Grid */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        @media (max-width: 640px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }

        .topic-card {
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.06);
            border-radius: 16px;
            padding: 2.5rem;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            border-color: rgba(0, 0, 0, 0.12);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            transform: translateY(-2px);
        }

        .section-alt .topic-card {
            background: #fafafa;
            border-color: rgba(0, 0, 0, 0.04);
        }

        .section-alt .topic-card:hover {
            background: white;
            border-color: rgba(0, 0, 0, 0.08);
        }

        .topic-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .topic-number {
            font-size: 0.875rem;
            font-weight: 600;
            color: #d1d5db;
            font-family: 'DM Sans', sans-serif;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f9fafb;
            border-radius: 8px;
        }

        .topic-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1a1a1a;
            flex: 1;
        }

        .topic-level {
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.375rem 0.875rem;
            border-radius: 100px;
            background: #f3f4f6;
            color: #6b7280;
        }

        .topic-level.intermediate {
            background: #fef3c7;
            color: #92400e;
        }

        .topic-level.advanced {
            background: #fee2e2;
            color: #991b1b;
        }

        .topic-content {
            color: #4b5563;
            line-height: 1.8;
        }

        .topic-content p {
            margin-bottom: 1rem;
        }

        /* Math Display */
        .math-box {
            background: #f9fafb;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }

        .math-box .MathJax {
            font-size: 1.1em !important;
        }

        /* Code Block */
        .code-block {
            background: #1a1a1a;
            color: #e5e7eb;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8125rem;
            line-height: 1.7;
        }

        .code-comment {
            color: #6b7280;
        }

        .code-keyword {
            color: #c084fc;
        }

        .code-func {
            color: #60a5fa;
        }

        .code-string {
            color: #4ade80;
        }

        /* Lists */
        .simple-list {
            list-style: none;
            padding: 0;
            margin: 1rem 0;
        }

        .simple-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: #4b5563;
        }

        .simple-list li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.9rem;
            width: 6px;
            height: 6px;
            background: #d1d5db;
            border-radius: 50%;
        }

        /* Highlight Box */
        .highlight-box {
            background: linear-gradient(135deg, #eff6ff, #fff1f2);
            border-left: 3px solid #6366f1;
            padding: 1.25rem 1.5rem;
            border-radius: 0 12px 12px 0;
            margin: 1.5rem 0;
        }

        .highlight-label {
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #6366f1;
            margin-bottom: 0.5rem;
        }

        /* Tables */
        .simple-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.875rem;
        }

        .simple-table th {
            text-align: left;
            padding: 0.875rem;
            border-bottom: 1px solid #e5e7eb;
            color: #9ca3af;
            font-weight: 500;
            font-size: 0.625rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            background: #f9fafb;
        }

        .simple-table td {
            padding: 0.875rem;
            border-bottom: 1px solid #f3f4f6;
            color: #4b5563;
        }

        .simple-table tr:hover td {
            color: #1a1a1a;
            background: #fafafa;
        }

        /* Visualization Container */
        .viz-wrap {
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.06);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .viz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .viz-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .viz-tabs {
            display: flex;
            gap: 0.25rem;
        }

        .viz-tab {
            padding: 0.5rem 1rem;
            border: none;
            background: transparent;
            color: #9ca3af;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .viz-tab:hover {
            color: #1a1a1a;
            background: rgba(0, 0, 0, 0.03);
        }

        .viz-tab.active {
            color: #1a1a1a;
            background: #f3f4f6;
        }

        .viz-canvas {
            width: 100%;
            height: 300px;
            background: #fafafa;
            border-radius: 8px;
        }

        /* Wide Card for Visualizations */
        .topic-wide {
            grid-column: 1 / -1;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 6rem 2rem;
            border-top: 1px solid rgba(0, 0, 0, 0.06);
            color: #9ca3af;
            font-size: 0.875rem;
        }

        /* Utility */
        .text-gradient {
            background: linear-gradient(135deg, #1a1a1a 0%, #4b5563 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>

<body>
    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar"></div>

    <!-- Navigation -->
    <nav class="nav" id="nav">
        <div class="flex justify-between items-center max-w-7xl mx-auto">
            <span class="font-display font-semibold text-sm tracking-tight">Math for AI</span>
            <div class="hidden md:flex gap-1">
                <a href="#foundations" class="nav-link">Foundations</a>
                <a href="#linear" class="nav-link">Linear Algebra</a>
                <a href="#calculus" class="nav-link">Calculus</a>
                <a href="#probability" class="nav-link">Probability</a>
                <a href="#optimization" class="nav-link">Optimization</a>
                <a href="#advanced" class="nav-link">Advanced</a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="float-shape shape-1"></div>
        <div class="float-shape shape-2"></div>

        <div class="hero-pretitle">Complete Visual Guide</div>
        <h1 class="hero-title font-display">
            <span>Mathematics</span>
            <span style="color: #9ca3af;">for Intelligence</span>
        </h1>
        <p class="hero-subtitle">
            From basic algebra to advanced optimization — every mathematical concept
            you need for modern machine learning, explained visually.
        </p>
        <a href="#foundations" class="hero-cta">
            Start Exploring
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M19 12l-7 7-7-7" />
            </svg>
        </a>
    </section>

    <!-- FOUNDATIONS -->
    <section class="section" id="foundations">
        <div class="section-inner">
            <div class="section-header">
                <span class="section-label">Module 00</span>
                <h2 class="section-title font-display">Foundations</h2>
                <p class="section-desc">
                    Essential algebraic concepts that serve as building blocks for all machine learning mathematics.
                </p>
            </div>

            <div class="topics-grid">
                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">01</span>
                        <h3 class="topic-title">Variables & Notation</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            In ML, <strong>x</strong> represents input features, <strong>y</strong> is the target
                            output,
                            and <strong>θ</strong> (theta) denotes learnable parameters. Vectors are bold
                            <strong>v</strong>,
                            matrices are capital <strong>W</strong>.
                        </p>
                        <div class="math-box">
                            $$y = f(x; \theta)$$
                        </div>
                        <p>Read as: "y is a function of x, parameterized by theta."</p>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">02</span>
                        <h3 class="topic-title">Functions</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            A function maps inputs to outputs. Neural networks are compositions of simple functions.
                        </p>
                        <table class="simple-table">
                            <tr>
                                <th>Function</th>
                                <th>Formula</th>
                                <th>Use</th>
                            </tr>
                            <tr>
                                <td>Linear</td>
                                <td>$f(x) = ax + b$</td>
                                <td>Regression</td>
                            </tr>
                            <tr>
                                <td>ReLU</td>
                                <td>$\max(0, x)$</td>
                                <td>Hidden layers</td>
                            </tr>
                            <tr>
                                <td>Sigmoid</td>
                                <td>$\frac{1}{1+e^{-x}}$</td>
                                <td>Binary probs</td>
                            </tr>
                            <tr>
                                <td>Tanh</td>
                                <td>$\frac{e^x - e^{-x}}{e^x + e^{-x}}$</td>
                                <td>Recurrent nets</td>
                            </tr>
                            <tr>
                                <td>Softmax</td>
                                <td>$\frac{e^{x_i}}{\sum e^{x_j}}$</td>
                                <td>Multi-class</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="topic-card topic-wide">
                    <div class="topic-header">
                        <span class="topic-number">03</span>
                        <h3 class="topic-title">Activation Functions Visualized</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            Activation functions introduce non-linearity, allowing neural networks to learn complex
                            patterns.
                        </p>
                        <div class="viz-wrap">
                            <div class="viz-header">
                                <span class="viz-title">Interactive Plot</span>
                                <div class="viz-tabs" id="funcTabs">
                                    <button class="viz-tab active" data-func="linear">Linear</button>
                                    <button class="viz-tab" data-func="relu">ReLU</button>
                                    <button class="viz-tab" data-func="sigmoid">Sigmoid</button>
                                    <button class="viz-tab" data-func="tanh">Tanh</button>
                                    <button class="viz-tab" data-func="softplus">Softplus</button>
                                </div>
                            </div>
                            <canvas id="funcCanvas" class="viz-canvas"></canvas>
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">04</span>
                        <h3 class="topic-title">Exponentials & Logarithms</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            <strong>Exponentials</strong> ($e^x$) model growth and appear in softmax.
                            <strong>Logarithms</strong> turn products into sums, essential for loss functions.
                        </p>
                        <div class="math-box">
                            $$\log(ab) = \log(a) + \log(b)$$
                            $$\frac{d}{dx}e^x = e^x$$
                        </div>
                        <div class="highlight-box">
                            <div class="highlight-label">Why this matters</div>
                            <p style="margin: 0; color: #374151;">
                                Cross-entropy uses logs to prevent numerical underflow when multiplying many small
                                probabilities.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">05</span>
                        <h3 class="topic-title">Sets & Logic</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            Understanding set notation helps read ML papers. Common sets:
                        </p>
                        <ul class="simple-list">
                            <li>$\mathbb{R}$ — real numbers (continuous values)</li>
                            <li>$\mathbb{R}^n$ — n-dimensional vectors</li>
                            <li>$\mathbb{R}^{m \times n}$ — matrices with m rows, n columns</li>
                            <li>$\{0, 1\}$ — binary set (classification labels)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- LINEAR ALGEBRA -->
    <section class="section section-alt" id="linear">
        <div class="section-inner">
            <div class="section-header">
                <span class="section-label">Module 01</span>
                <h2 class="section-title font-display">Linear Algebra</h2>
                <p class="section-desc">
                    The language of data. Vectors, matrices, and tensors — how we represent and transform information in
                    ML.
                </p>
            </div>

            <div class="topics-grid">
                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">01</span>
                        <h3 class="topic-title">Vectors</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            A <strong>vector</strong> is an ordered list of numbers. One data point = one vector.
                            An image with 784 pixels becomes a vector in $\mathbb{R}^{784}$.
                        </p>
                        <div class="math-box">
                            $$\mathbf{v} = \begin{bmatrix} v_1 \\ v_2 \\ \vdots \\ v_n \end{bmatrix} \in \mathbb{R}^n$$
                        </div>
                        <p><strong>Dot product</strong> measures similarity: $\mathbf{a} \cdot \mathbf{b} = \sum a_i
                            b_i$</p>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">02</span>
                        <h3 class="topic-title">Vector Operations</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <table class="simple-table">
                            <tr>
                                <th>Operation</th>
                                <th>Notation</th>
                                <th>ML Use</th>
                            </tr>
                            <tr>
                                <td>Addition</td>
                                <td>$\mathbf{u} + \mathbf{v}$</td>
                                <td>Residual connections</td>
                            </tr>
                            <tr>
                                <td>Dot product</td>
                                <td>$\mathbf{u} \cdot \mathbf{v}$</td>
                                <td>Attention, similarity</td>
                            </tr>
                            <tr>
                                <td>Hadamard</td>
                                <td>$\mathbf{u} \circ \mathbf{v}$</td>
                                <td>Dropout masking</td>
                            </tr>
                            <tr>
                                <td>Outer product</td>
                                <td>$\mathbf{u} \mathbf{v}^T$</td>
                                <td>Gradient computation</td>
                            </tr>
                            <tr>
                                <td>Norm</td>
                                <td>$\|\mathbf{v}\|_2$</td>
                                <td>Regularization</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">03</span>
                        <h3 class="topic-title">Matrices</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            A <strong>matrix</strong> is a 2D array. Your dataset is a matrix where rows are samples
                            and columns are features.
                        </p>
                        <div class="math-box">
                            $$A \in \mathbb{R}^{m \times n}$$
                        </div>
                        <p>
                            <strong>Matrix multiplication</strong> is the fundamental operation of neural networks:
                            $\mathbf{y} = W\mathbf{x} + \mathbf{b}$
                        </p>
                    </div>
                </div>

                <div class="topic-card topic-wide">
                    <div class="topic-header">
                        <span class="topic-number">04</span>
                        <h3 class="topic-title">Linear Transformations</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            Matrices transform space. Click to see how different matrices rotate, scale, or shear the
                            grid.
                        </p>
                        <div class="viz-wrap">
                            <div class="viz-header">
                                <span class="viz-title">Matrix Visualization</span>
                                <div class="viz-tabs" id="matrixTabs">
                                    <button class="viz-tab active" data-transform="identity">Identity</button>
                                    <button class="viz-tab" data-transform="rotate">Rotation</button>
                                    <button class="viz-tab" data-transform="scale">Scaling</button>
                                    <button class="viz-tab" data-transform="shear">Shear</button>
                                    <button class="viz-tab" data-transform="projection">Projection</button>
                                </div>
                            </div>
                            <canvas id="matrixCanvas" class="viz-canvas"></canvas>
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">05</span>
                        <h3 class="topic-title">Special Matrices</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <table class="simple-table">
                            <tr>
                                <th>Type</th>
                                <th>Property</th>
                                <th>Use</th>
                            </tr>
                            <tr>
                                <td>Identity (I)</td>
                                <td>$AI = A$</td>
                                <td>Skip connections</td>
                            </tr>
                            <tr>
                                <td>Diagonal</td>
                                <td>Non-zero on diagonal only</td>
                                <td>Scaling, covariance</td>
                            </tr>
                            <tr>
                                <td>Symmetric</td>
                                <td>$A = A^T$</td>
                                <td>Distance matrices</td>
                            </tr>
                            <tr>
                                <td>Orthogonal</td>
                                <td>$A^T A = I$</td>
                                <td>Rotations, PCA</td>
                            </tr>
                            <tr>
                                <td>Positive Definite</td>
                                <td>$\mathbf{x}^T A \mathbf{x} > 0$</td>
                                <td>Convex optimization</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">06</span>
                        <h3 class="topic-title">Matrix Decompositions</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>Breaking matrices into simpler components:</p>
                        <ul class="simple-list">
                            <li><strong>LU:</strong> $A = LU$ for solving linear systems</li>
                            <li><strong>Cholesky:</strong> $A = LL^T$ for positive definite matrices</li>
                            <li><strong>Eigendecomposition:</strong> $A = Q\Lambda Q^{-1}$</li>
                            <li><strong>SVD:</strong> $A = U\Sigma V^T$ — most important for ML</li>
                        </ul>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">07</span>
                        <h3 class="topic-title">Eigenvalues & Eigenvectors</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            <strong>Eigenvectors</strong> are directions that only stretch (not rotate) when
                            transformed.
                            The stretch amount is the <strong>eigenvalue</strong>.
                        </p>
                        <div class="math-box">
                            $$A\mathbf{v} = \lambda\mathbf{v}$$
                        </div>
                        <div class="highlight-box">
                            <div class="highlight-label">PCA Application</div>
                            <p style="margin: 0; color: #374151;">
                                Find eigenvectors of covariance matrix. The one with largest eigenvalue
                                is the direction of maximum variance — your first principal component.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">08</span>
                        <h3 class="topic-title">Tensors</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            <strong>Tensors</strong> generalize vectors and matrices to any number of dimensions.
                        </p>
                        <ul class="simple-list">
                            <li>0D: Scalar (number)</li>
                            <li>1D: Vector (sequence)</li>
                            <li>2D: Matrix (grid)</li>
                            <li>3D: Tensor (e.g., RGB image: height × width × channels)</li>
                            <li>4D: Batch of images (batch × height × width × channels)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CALCULUS -->
    <section class="section" id="calculus">
        <div class="section-inner">
            <div class="section-header">
                <span class="section-label">Module 02</span>
                <h2 class="section-title font-display">Calculus</h2>
                <p class="section-desc">
                    The mathematics of change. Derivatives tell us how to adjust parameters to improve our models.
                </p>
            </div>

            <div class="topics-grid">
                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">01</span>
                        <h3 class="topic-title">Limits</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            The <strong>limit</strong> describes what happens as we approach a value.
                            The derivative is defined as a limit.
                        </p>
                        <div class="math-box">
                            $$f'(x) = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h}$$
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">02</span>
                        <h3 class="topic-title">Derivatives</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>The derivative is the slope of a function at a point.</p>
                        <table class="simple-table">
                            <tr>
                                <th>Function</th>
                                <th>Derivative</th>
                            </tr>
                            <tr>
                                <td>$x^n$</td>
                                <td>$nx^{n-1}$</td>
                            </tr>
                            <tr>
                                <td>$e^x$</td>
                                <td>$e^x$</td>
                            </tr>
                            <tr>
                                <td>$\ln(x)$</td>
                                <td>$\frac{1}{x}$</td>
                            </tr>
                            <tr>
                                <td>$\sin(x)$</td>
                                <td>$\cos(x)$</td>
                            </tr>
                            <tr>
                                <td>$\sigma(x)$ (sigmoid)</td>
                                <td>$\sigma(x)(1-\sigma(x))$</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">03</span>
                        <h3 class="topic-title">Derivative Rules</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <div class="math-box">
                            <strong>Sum:</strong> $(f + g)' = f' + g'$<br>
                            <strong>Product:</strong> $(fg)' = f'g + fg'$<br>
                            <strong>Quotient:</strong> $(\frac{f}{g})' = \frac{f'g - fg'}{g^2}$<br>
                            <strong>Chain:</strong> $(f(g(x)))' = f'(g(x)) \cdot g'(x)$
                        </div>
                        <p>The <strong>chain rule</strong> is the foundation of backpropagation.</p>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">04</span>
                        <h3 class="topic-title">Partial Derivatives</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            For functions with multiple inputs, the <strong>partial derivative</strong>
                            measures change with respect to one input, holding others constant.
                        </p>
                        <div class="math-box">
                            $$\frac{\partial f}{\partial x_i}$$
                        </div>
                    </div>
                </div>

                <div class="topic-card topic-wide">
                    <div class="topic-header">
                        <span class="topic-number">05</span>
                        <h3 class="topic-title">Gradients & Gradient Descent</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            The <strong>gradient</strong> is a vector of all partial derivatives.
                            It points in the direction of steepest increase. To minimize loss, we go opposite.
                        </p>
                        <div class="math-box">
                            $$\nabla f = \begin{bmatrix} \frac{\partial f}{\partial x_1} \\ \vdots \\ \frac{\partial
                            f}{\partial x_n} \end{bmatrix}$$
                            $$\theta_{new} = \theta_{old} - \eta \nabla L$$
                        </div>
                        <div class="viz-wrap">
                            <div class="viz-header">
                                <span class="viz-title">Gradient Descent Visualization</span>
                            </div>
                            <canvas id="gradCanvas" class="viz-canvas"></canvas>
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">06</span>
                        <h3 class="topic-title">Integrals</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            Integration computes areas under curves. In probability, it gives us
                            cumulative probabilities.
                        </p>
                        <div class="math-box">
                            $$P(a \leq X \leq b) = \int_a^b p(x) dx$$
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">07</span>
                        <h3 class="topic-title">Multivariable Calculus</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            <strong>Jacobian:</strong> Matrix of first derivatives<br>
                            <strong>Hessian:</strong> Matrix of second derivatives (curvature)
                        </p>
                        <div class="math-box">
                            $$H_{ij} = \frac{\partial^2 f}{\partial x_i \partial x_j}$$
                        </div>
                        <p>Positive definite Hessian → convex (good for optimization).</p>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">08</span>
                        <h3 class="topic-title">Backpropagation</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            Applying the chain rule backward through the computational graph to compute gradients.
                        </p>
                        <div class="code-block">
                            <span class="code-comment"># Forward pass</span>
                            z = W @ x + b
                            a = sigmoid(z)
                            loss = (a - y)**2

                            <span class="code-comment"># Backward pass (chain rule)</span>
                            d_loss = 2 * (a - y)
                            da_dz = a * (1 - a) <span class="code-comment"># sigmoid derivative</span>
                            dL_dz = d_loss * da_dz <span class="code-comment"># chain rule</span>
                            dL_dW = dL_dz @ x.T <span class="code-comment"># gradient for weights</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- PROBABILITY -->
    <section class="section section-alt" id="probability">
        <div class="section-inner">
            <div class="section-header">
                <span class="section-label">Module 03</span>
                <h2 class="section-title font-display">Probability</h2>
                <p class="section-desc">
                    Quantifying uncertainty. Essential for classification, predictions, and understanding model
                    confidence.
                </p>
            </div>

            <div class="topics-grid">
                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">01</span>
                        <h3 class="topic-title">Probability Basics</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            $P(A)$ is the probability of event A, from 0 (impossible) to 1 (certain).
                        </p>
                        <ul class="simple-list">
                            <li><strong>Joint:</strong> $P(A, B)$ — both occur</li>
                            <li><strong>Marginal:</strong> $P(A) = \sum_B P(A, B)$</li>
                            <li><strong>Conditional:</strong> $P(A|B) = \frac{P(A, B)}{P(B)}$</li>
                            <li><strong>Independence:</strong> $P(A, B) = P(A)P(B)$</li>
                        </ul>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">02</span>
                        <h3 class="topic-title">Random Variables</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            A random variable assigns numbers to outcomes. Can be discrete or continuous.
                        </p>
                        <div class="math-box">
                            <strong>PMF</strong> (discrete): $P(X = x)$<br>
                            <strong>PDF</strong> (continuous): $p(x)$ where $\int p(x)dx = 1$<br>
                            <strong>CDF</strong>: $F(x) = P(X \leq x)$
                        </div>
                    </div>
                </div>

                <div class="topic-card topic-wide">
                    <div class="topic-header">
                        <span class="topic-number">03</span>
                        <h3 class="topic-title">Probability Distributions</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <div class="viz-wrap">
                            <div class="viz-header">
                                <span class="viz-title">Distribution Visualizer</span>
                                <div class="viz-tabs" id="distTabs">
                                    <button class="viz-tab active" data-dist="normal">Normal</button>
                                    <button class="viz-tab" data-dist="uniform">Uniform</button>
                                    <button class="viz-tab" data-dist="exponential">Exponential</button>
                                    <button class="viz-tab" data-dist="beta">Beta</button>
                                </div>
                            </div>
                            <canvas id="distCanvas" class="viz-canvas"></canvas>
                        </div>
                        <table class="simple-table" style="margin-top: 1.5rem;">
                            <tr>
                                <th>Distribution</th>
                                <th>Type</th>
                                <th>Key Use</th>
                            </tr>
                            <tr>
                                <td>Normal/Gaussian</td>
                                <td>Continuous</td>
                                <td>Noise, weight init (via Xavier/He)</td>
                            </tr>
                            <tr>
                                <td>Uniform</td>
                                <td>Continuous</td>
                                <td>Random sampling, initialization</td>
                            </tr>
                            <tr>
                                <td>Bernoulli</td>
                                <td>Discrete</td>
                                <td>Binary outcomes, dropout</td>
                            </tr>
                            <tr>
                                <td>Categorical</td>
                                <td>Discrete</td>
                                <td>Multi-class classification</td>
                            </tr>
                            <tr>
                                <td>Multinomial</td>
                                <td>Discrete</td>
                                <td>Word frequencies, counts</td>
                            </tr>
                            <tr>
                                <td>Beta</td>
                                <td>Continuous</td>
                                <td>Probabilities (0 to 1)</td>
                            </tr>
                            <tr>
                                <td>Dirichlet</td>
                                <td>Continuous</td>
                                <td>Distribution over distributions</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">04</span>
                        <h3 class="topic-title">Expectation & Variance</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <div class="math-box">
                            $$\mathbb{E}[X] = \sum_x x \cdot P(X=x)$$
                            $$\text{Var}(X) = \mathbb{E}[(X - \mu)^2] = \mathbb{E}[X^2] - \mathbb{E}[X]^2$$
                        </div>
                        <p>
                            <strong>Covariance:</strong> $\text{Cov}(X,Y) = \mathbb{E}[(X-\mu_X)(Y-\mu_Y)]$
                        </p>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">05</span>
                        <h3 class="topic-title">Bayes' Theorem</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>Update beliefs based on evidence:</p>
                        <div class="math-box">
                            $$P(\theta|D) = \frac{P(D|\theta) \cdot P(\theta)}{P(D)}$$
                        </div>
                        <ul class="simple-list">
                            <li><strong>Prior</strong> $P(\theta)$: Belief before data</li>
                            <li><strong>Likelihood</strong> $P(D|\theta)$: Probability of data</li>
                            <li><strong>Posterior</strong> $P(\theta|D)$: Belief after data</li>
                        </ul>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">06</span>
                        <h3 class="topic-title">Maximum Likelihood</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            Find parameters that maximize the probability of observed data.
                        </p>
                        <div class="math-box">
                            $$\theta_{MLE} = \arg\max_\theta P(D|\theta)$$
                        </div>
                        <p>Equivalent to minimizing negative log-likelihood (cross-entropy).</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- OPTIMIZATION -->
    <section class="section" id="optimization">
        <div class="section-inner">
            <div class="section-header">
                <span class="section-label">Module 04</span>
                <h2 class="section-title font-display">Optimization</h2>
                <p class="section-desc">
                    Finding the best parameters. The algorithms that enable machines to learn from data.
                </p>
            </div>

            <div class="topics-grid">
                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">01</span>
                        <h3 class="topic-title">Gradient Descent Variants</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <table class="simple-table">
                            <tr>
                                <th>Variant</th>
                                <th>Update</th>
                                <th>Pros/Cons</th>
                            </tr>
                            <tr>
                                <td>Batch</td>
                                <td>Full dataset</td>
                                <td>Stable, slow</td>
                            </tr>
                            <tr>
                                <td>Stochastic (SGD)</td>
                                <td>One sample</td>
                                <td>Fast, noisy</td>
                            </tr>
                            <tr>
                                <td>Mini-batch</td>
                                <td>32-512 samples</td>
                                <td>Best balance</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">02</span>
                        <h3 class="topic-title">Learning Rate</h3>
                        <span class="topic-level">Beginner</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            The step size $\eta$ (eta) is crucial. Too large: divergence.
                            Too small: slow convergence.
                        </p>
                        <ul class="simple-list">
                            <li><strong>Decay:</strong> $\eta_t = \eta_0 / (1 + \gamma t)$</li>
                            <li><strong>Step decay:</strong> Drop by factor every N epochs</li>
                            <li><strong>Cosine annealing:</strong> Smooth decay</li>
                            <li><strong>Warmup:</strong> Start small, increase</li>
                        </ul>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">03</span>
                        <h3 class="topic-title">Momentum</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            Accumulate velocity in directions of consistent gradient.
                        </p>
                        <div class="math-box">
                            $$v_t = \gamma v_{t-1} + \eta \nabla L$$
                            $$\theta = \theta - v_t$$
                        </div>
                        <p>Helps escape shallow local minima and accelerates through flat regions.</p>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">04</span>
                        <h3 class="topic-title">Adaptive Optimizers</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <table class="simple-table">
                            <tr>
                                <th>Optimizer</th>
                                <th>Key Feature</th>
                            </tr>
                            <tr>
                                <td>AdaGrad</td>
                                <td>Per-parameter LR based on history</td>
                            </tr>
                            <tr>
                                <td>RMSprop</td>
                                <td>Moving average of squared gradients</td>
                            </tr>
                            <tr>
                                <td>Adam</td>
                                <td>Momentum + RMSprop (most popular)</td>
                            </tr>
                            <tr>
                                <td>AdamW</td>
                                <td>Adam with proper weight decay</td>
                            </tr>
                            <tr>
                                <td>LAMB</td>
                                <td>Layer-wise LR for large batches</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="topic-card topic-wide">
                    <div class="topic-header">
                        <span class="topic-number">05</span>
                        <h3 class="topic-title">Regularization Techniques</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <div class="topics-grid" style="margin-top: 1.5rem;">
                            <div>
                                <h4 style="font-weight: 600; margin-bottom: 0.75rem;">L1 / L2 Regularization</h4>
                                <p style="font-size: 0.875rem; color: #6b7280;">
                                    Add penalty to loss: $\lambda \|\theta\|_1$ (sparse) or $\lambda \|\theta\|_2^2$
                                    (small weights)
                                </p>
                            </div>
                            <div>
                                <h4 style="font-weight: 600; margin-bottom: 0.75rem;">Dropout</h4>
                                <p style="font-size: 0.875rem; color: #6b7280;">
                                    Randomly zero neurons during training. Prevents co-adaptation.
                                </p>
                            </div>
                            <div>
                                <h4 style="font-weight: 600; margin-bottom: 0.75rem;">Early Stopping</h4>
                                <p style="font-size: 0.875rem; color: #6b7280;">
                                    Stop training when validation loss stops improving.
                                </p>
                            </div>
                            <div>
                                <h4 style="font-weight: 600; margin-bottom: 0.75rem;">Batch Normalization</h4>
                                <p style="font-size: 0.875rem; color: #6b7280;">
                                    Normalize layer inputs. Stabilizes training, allows higher LR.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">06</span>
                        <h3 class="topic-title">Second-Order Methods</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            Use curvature information (Hessian) for faster convergence.
                        </p>
                        <div class="math-box">
                            $$\theta_{new} = \theta_{old} - H^{-1}\nabla L$$
                        </div>
                        <p>
                            <strong>Newton's method</strong> is expensive ($O(n^3)$).
                            <strong>L-BFGS</strong> approximates Hessian efficiently.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ADVANCED -->
    <section class="section section-alt" id="advanced">
        <div class="section-inner">
            <div class="section-header">
                <span class="section-label">Module 05</span>
                <h2 class="section-title font-display">Advanced Topics</h2>
                <p class="section-desc">
                    Information theory, numerical methods, and specialized techniques for modern deep learning.
                </p>
            </div>

            <div class="topics-grid">
                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">01</span>
                        <h3 class="topic-title">Information Theory</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <div class="math-box">
                            <strong>Entropy:</strong> $H(X) = -\sum p(x)\log p(x)$<br>
                            <strong>KL Divergence:</strong> $D_{KL}(p\|q) = \sum p(x)\log\frac{p(x)}{q(x)}$<br>
                            <strong>Cross-Entropy:</strong> $H(p,q) = H(p) + D_{KL}(p\|q)$
                        </div>
                        <p>
                            Cross-entropy is the standard loss for classification.
                            Minimizing it = making predicted distribution match true distribution.
                        </p>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">02</span>
                        <h3 class="topic-title">Numerical Stability</h3>
                        <span class="topic-level intermediate">Intermediate</span>
                    </div>
                    <div class="topic-content">
                        <ul class="simple-list">
                            <li><strong>Log-sum-exp trick:</strong> Prevent overflow in softmax</li>
                            <li><strong>Xavier/He init:</strong> Keep variance stable through layers</li>
                            <li><strong>Gradient clipping:</strong> Prevent exploding gradients</li>
                            <li><strong>Mixed precision:</strong> FP16 training with FP32 master</li>
                        </ul>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">03</span>
                        <h3 class="topic-title">Constrained Optimization</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            <strong>Lagrange multipliers</strong> for optimization with constraints.
                            Used in SVMs and when parameters must satisfy conditions.
                        </p>
                        <div class="math-box">
                            $$\mathcal{L}(x, \lambda) = f(x) - \lambda g(x)$$
                        </div>
                    </div>
                </div>

                <div class="topic-card">
                    <div class="topic-header">
                        <span class="topic-number">04</span>
                        <h3 class="topic-title">AutoDiff</h3>
                        <span class="topic-level advanced">Advanced</span>
                    </div>
                    <div class="topic-content">
                        <p>
                            <strong>Automatic differentiation</strong> computes exact derivatives
                            by traversing the computational graph.
                        </p>
                        <ul class="simple-list">
                            <li><strong>Forward mode:</strong> One pass per input</li>
                            <li><strong>Reverse mode:</strong> One pass per output (backprop)</li>
                            <li>Used in PyTorch, TensorFlow, JAX</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p class="font-display font-semibold text-lg text-gray-900">Mathematics for AI</p>
        <p style="margin-top: 0.5rem;">Complete visual guide to ML mathematics</p>
    </footer>

    <script>
        // Progress bar and nav
        const progressBar = document.getElementById('progressBar');
        const nav = document.getElementById('nav');

        window.addEventListener('scroll', () => {
            const scrolled = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);
            progressBar.style.transform = `scaleX(${scrolled})`;

            if (window.scrollY > 100) {
                nav.classList.add('visible');
            } else {
                nav.classList.remove('visible');
            }
        }, { passive: true });

        // GSAP Animations
        gsap.registerPlugin(ScrollTrigger);

        // Hero
        gsap.to('.hero-pretitle', { opacity: 1, y: 0, duration: 0.8, delay: 0.2, ease: 'power2.out' });
        gsap.to('.hero-title', { opacity: 1, y: 0, duration: 0.8, delay: 0.4, ease: 'power2.out' });
        gsap.to('.hero-subtitle', { opacity: 1, y: 0, duration: 0.8, delay: 0.6, ease: 'power2.out' });
        gsap.to('.hero-cta', { opacity: 1, y: 0, duration: 0.8, delay: 0.8, ease: 'power2.out' });

        // Section headers
        gsap.utils.toArray('.section-header').forEach(header => {
            gsap.from(header, {
                scrollTrigger: {
                    trigger: header,
                    start: 'top 85%',
                    toggleActions: 'play none none reverse'
                },
                y: 30,
                opacity: 0,
                duration: 0.6,
                ease: 'power2.out'
            });
        });

        // Topic cards
        gsap.utils.toArray('.topic-card').forEach((card, i) => {
            gsap.from(card, {
                scrollTrigger: {
                    trigger: card,
                    start: 'top 90%',
                    toggleActions: 'play none none reverse'
                },
                y: 40,
                opacity: 0,
                duration: 0.5,
                delay: (i % 3) * 0.1,
                ease: 'power2.out'
            });
        });

        // Function Plotter
        function initFuncPlot() {
            const canvas = document.getElementById('funcCanvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();

            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);

            const width = rect.width;
            const height = rect.height;
            const cx = width / 2;
            const cy = height / 2;
            const scale = 40;

            function drawGrid() {
                ctx.fillStyle = '#fafafa';
                ctx.fillRect(0, 0, width, height);

                // Grid lines
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 1;
                for (let i = -5; i <= 5; i++) {
                    ctx.beginPath();
                    ctx.moveTo(cx + i * scale, 0);
                    ctx.lineTo(cx + i * scale, height);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(0, cy + i * scale);
                    ctx.lineTo(width, cy + i * scale);
                    ctx.stroke();
                }

                // Axes
                ctx.strokeStyle = '#9ca3af';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, cy);
                ctx.lineTo(width, cy);
                ctx.moveTo(cx, 0);
                ctx.lineTo(cx, height);
                ctx.stroke();
            }

            function plot(type) {
                drawGrid();

                ctx.strokeStyle = '#4f46e5';
                ctx.lineWidth = 3;
                ctx.beginPath();

                for (let px = 0; px < width; px++) {
                    const x = (px - cx) / scale;
                    let y;

                    switch (type) {
                        case 'linear':
                            y = 0.5 * x;
                            break;
                        case 'relu':
                            y = Math.max(0, x) - 0.5;
                            break;
                        case 'sigmoid':
                            y = 4 / (1 + Math.exp(-x)) - 2;
                            break;
                        case 'tanh':
                            y = 2.5 * Math.tanh(x);
                            break;
                        case 'softplus':
                            y = Math.log(1 + Math.exp(x)) - 1;
                            if (y > 4) y = 4;
                            break;
                    }

                    const py = cy - y * scale;
                    if (px === 0) ctx.moveTo(px, py);
                    else ctx.lineTo(px, py);
                }
                ctx.stroke();
            }

            // Tab handlers
            document.querySelectorAll('#funcTabs .viz-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('#funcTabs .viz-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    plot(tab.dataset.func);
                });
            });

            plot('linear');
        }

        // Matrix Visualizer
        function initMatrixViz() {
            const canvas = document.getElementById('matrixCanvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();

            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);

            const width = rect.width;
            const height = rect.height;
            const cx = width / 2;
            const cy = height / 2;
            const scale = 25;

            let currentMatrix = [[1, 0], [0, 1]];
            let points = [];

            // Create grid points
            for (let x = -6; x <= 6; x += 1) {
                for (let y = -6; y <= 6; y += 1) {
                    points.push({ x, y, ox: x, oy: y, vx: 0, vy: 0 });
                }
            }

            function animate() {
                ctx.fillStyle = '#fafafa';
                ctx.fillRect(0, 0, width, height);

                // Grid
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 1;
                for (let i = -10; i <= 10; i++) {
                    ctx.beginPath();
                    ctx.moveTo(cx + i * scale * 2, 0);
                    ctx.lineTo(cx + i * scale * 2, height);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(0, cy + i * scale * 2);
                    ctx.lineTo(width, cy + i * scale * 2);
                    ctx.stroke();
                }

                // Update and draw points
                points.forEach(p => {
                    // Target position
                    const tx = currentMatrix[0][0] * p.ox + currentMatrix[0][1] * p.oy;
                    const ty = currentMatrix[1][0] * p.ox + currentMatrix[1][1] * p.oy;

                    // Smooth interpolation
                    p.x += (tx - p.x) * 0.08;
                    p.y += (ty - p.y) * 0.08;

                    const px = cx + p.x * scale;
                    const py = cy - p.y * scale;

                    // Skip if out of bounds
                    if (px < -10 || px > width + 10 || py < -10 || py > height + 10) return;

                    ctx.fillStyle = '#4f46e5';
                    ctx.beginPath();
                    ctx.arc(px, py, 3, 0, Math.PI * 2);
                    ctx.fill();
                });

                requestAnimationFrame(animate);
            }

            animate();

            // Tab handlers
            document.querySelectorAll('#matrixTabs .viz-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('#matrixTabs .viz-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    const type = tab.dataset.transform;
                    switch (type) {
                        case 'identity':
                            currentMatrix = [[1, 0], [0, 1]];
                            break;
                        case 'rotate':
                            const theta = Math.PI / 6;
                            currentMatrix = [[Math.cos(theta), -Math.sin(theta)], [Math.sin(theta), Math.cos(theta)]];
                            break;
                        case 'scale':
                            currentMatrix = [[1.5, 0], [0, 0.5]];
                            break;
                        case 'shear':
                            currentMatrix = [[1, 0.5], [0, 1]];
                            break;
                        case 'projection':
                            currentMatrix = [[1, 0], [0, 0]];
                            break;
                    }
                });
            });
        }

        // Gradient Descent Visualizer
        function initGradViz() {
            const canvas = document.getElementById('gradCanvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();

            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);

            const width = rect.width;
            const height = rect.height;
            const cx = width / 2;
            const cy = height / 2;
            const scale = 12;

            let ball = { x: -4, y: 16, trail: [] };

            function animate() {
                ctx.fillStyle = '#fafafa';
                ctx.fillRect(0, 0, width, height);

                // Contour circles (quadratic bowl)
                ctx.strokeStyle = '#e0e7ff';
                ctx.lineWidth = 2;
                for (let r = 1; r <= 20; r += 2) {
                    ctx.beginPath();
                    ctx.arc(cx, cy, r * scale, 0, Math.PI * 2);
                    ctx.stroke();
                }

                // Update ball position (gradient descent)
                const lr = 0.08;
                ball.x -= lr * 0.5 * ball.x;
                ball.y -= lr * 0.5 * ball.y;

                // Reset if converged
                if (Math.abs(ball.x) < 0.2 && Math.abs(ball.y) < 0.2) {
                    ball.x = -4 + Math.random() * 2;
                    ball.y = 16 + Math.random() * 4;
                    ball.trail = [];
                }

                // Add to trail
                ball.trail.push({ x: ball.x, y: ball.y });
                if (ball.trail.length > 50) ball.trail.shift();

                // Draw trail
                ctx.strokeStyle = 'rgba(236, 72, 153, 0.3)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ball.trail.forEach((p, i) => {
                    const px = cx + p.x * scale;
                    const py = cy - p.y * scale;
                    if (i === 0) ctx.moveTo(px, py);
                    else ctx.lineTo(px, py);
                });
                ctx.stroke();

                // Draw ball
                const bx = cx + ball.x * scale;
                const by = cy - ball.y * scale;

                ctx.fillStyle = '#ec4899';
                ctx.beginPath();
                ctx.arc(bx, by, 8, 0, Math.PI * 2);
                ctx.fill();

                // Gradient arrow
                ctx.strokeStyle = '#10b981';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(bx, by);
                ctx.lineTo(bx - ball.x * 2, by + ball.y * 2);
                ctx.stroke();

                // Arrowhead
                const angle = Math.atan2(ball.y, -ball.x);
                ctx.beginPath();
                ctx.moveTo(bx - ball.x * 2, by + ball.y * 2);
                ctx.lineTo(
                    bx - ball.x * 2 - 8 * Math.cos(angle - 0.5),
                    by + ball.y * 2 - 8 * Math.sin(angle - 0.5)
                );
                ctx.moveTo(bx - ball.x * 2, by + ball.y * 2);
                ctx.lineTo(
                    bx - ball.x * 2 - 8 * Math.cos(angle + 0.5),
                    by + ball.y * 2 - 8 * Math.sin(angle + 0.5)
                );
                ctx.stroke();

                requestAnimationFrame(animate);
            }

            animate();
        }

        // Distribution Visualizer
        function initDistViz() {
            const canvas = document.getElementById('distCanvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();

            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);

            const width = rect.width;
            const height = rect.height;
            const cx = width / 2;
            const cy = height * 0.8;
            const scaleX = 15;
            const scaleY = 150;

            function plot(type) {
                ctx.fillStyle = '#fafafa';
                ctx.fillRect(0, 0, width, height);

                ctx.strokeStyle = '#8b5cf6';
                ctx.lineWidth = 3;
                ctx.beginPath();

                let maxY = 0;
                const points = [];

                for (let px = 0; px < width; px++) {
                    const x = (px - cx) / scaleX;
                    let y = 0;

                    switch (type) {
                        case 'normal':
                            y = Math.exp(-x * x / 2) / Math.sqrt(2 * Math.PI);
                            break;
                        case 'uniform':
                            y = Math.abs(x) < 5 ? 0.1 : 0;
                            break;
                        case 'exponential':
                            y = x > -5 ? 0.5 * Math.exp(-0.5 * (x + 5)) : 0;
                            break;
                        case 'beta':
                            // Simple beta approximation
                            if (Math.abs(x) < 4) {
                                const t = (x + 4) / 8;
                                y = 6 * Math.pow(t, 2) * Math.pow(1 - t, 2);
                            }
                            break;
                    }

                    points.push({ x: px, y });
                    if (y > maxY) maxY = y;
                }

                // Normalize and draw
                points.forEach((p, i) => {
                    const normalizedY = p.y / (maxY || 1);
                    const py = cy - normalizedY * scaleY;
                    if (i === 0) ctx.moveTo(p.x, py);
                    else ctx.lineTo(p.x, py);
                });

                ctx.stroke();

                // Fill
                ctx.lineTo(width, cy);
                ctx.lineTo(0, cy);
                ctx.closePath();
                ctx.fillStyle = 'rgba(139, 92, 246, 0.1)';
                ctx.fill();
            }

            // Tab handlers
            document.querySelectorAll('#distTabs .viz-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('#distTabs .viz-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    plot(tab.dataset.dist);
                });
            });

            plot('normal');
        }

        // Initialize all visualizations when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            initFuncPlot();
            initMatrixViz();
            initGradViz();
            initDistViz();
        });

        // Handle resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                initFuncPlot();
                initMatrixViz();
                initGradViz();
                initDistViz();
            }, 250);
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>

</html>