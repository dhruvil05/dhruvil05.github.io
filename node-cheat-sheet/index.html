<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js Complete Cheat Sheet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 3rem;
            color: white;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
        }

        .search-container {
            margin-bottom: 30px;
            text-align: center;
        }

        .search-box {
            padding: 15px 20px;
            font-size: 16px;
            border: none;
            border-radius: 50px;
            width: 60%;
            max-width: 400px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            outline: none;
        }

        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .topic-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.2);
        }

        .topic-card h3 {
            color: #4a5568;
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .icon {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .topic-description {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .subtopics {
            display: none;
            margin-top: 20px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .subtopics.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .subtopic {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(103, 126, 234, 0.05);
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .subtopic h4 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .subtopic p {
            color: #666;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            margin: 10px 0;
            overflow-x: auto;
            border: 1px solid #4a5568;
            white-space: pre-wrap;
            position: relative;
        }

        .code-block::before {
            content: 'Code';
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 0.7rem;
            color: #a0aec0;
            background: #4a5568;
            padding: 2px 8px;
            border-radius: 3px;
        }

        .example-scenario {
            background: rgba(72, 187, 120, 0.1);
            border-left: 4px solid #48bb78;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .example-scenario h5 {
            color: #2f855a;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .toggle-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .toggle-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .quick-links {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            z-index: 1000;
            max-height: 70vh;
            overflow-y: auto;
            width: 200px;
        }

        .quick-links h4 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 1rem;
            text-align: center;
        }

        .quick-link {
            display: block;
            padding: 8px 12px;
            color: #666;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 5px;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .quick-link:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            padding: 50px;
        }

        .no-results {
            text-align: center;
            color: #666;
            font-size: 1.1rem;
            padding: 50px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .quick-links {
                display: none;
            }
            
            .search-box {
                width: 90%;
            }
            
            .topics-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }

            .topic-card {
                padding: 20px;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 Node.js Complete Cheat Sheet</h1>
            <p>Your comprehensive guide to mastering Node.js - From beginner to pro!</p>
        </div>

        <div class="search-container">
            <input type="text" class="search-box" placeholder="Search Node.js topics... (Try 'express', 'async', 'database')" id="searchBox">
        </div>

        <div class="topics-grid" id="topicsGrid">
            <div class="loading">Loading Node.js topics...</div>
        </div>
    </div>

    <div class="quick-links">
        <h4>Quick Jump</h4>
        <div id="quickLinksContainer">
            <!-- Quick links will be generated -->
        </div>
    </div>

    <script>
        // Node.js topics data
        const nodeJsTopics = [
            {
                id: 'introduction',
                title: 'Introduction to Node.js',
                icon: '🌟',
                description: 'Understanding what Node.js is, its architecture, and why it\'s popular for backend development.',
                subtopics: [
                    {
                        title: 'What is Node.js?',
                        description: 'Node.js is a runtime environment that allows you to run JavaScript on the server side, built on Chrome\'s V8 JavaScript engine.',
                        scenario: 'Building a web server that can handle thousands of concurrent connections efficiently.',
                        code: `// Simple Node.js server
const http = require('http');

const server = http.createServer((req, res) => {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World from Node.js!');
});

server.listen(3000, () => {
    console.log('Server running on port 3000');
});`
                    },
                    {
                        title: 'Event-Driven Architecture',
                        description: 'Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient.',
                        scenario: 'Handling file uploads while simultaneously serving other requests without blocking.',
                        code: `const EventEmitter = require('events');

class MyEmitter extends EventEmitter {}
const myEmitter = new MyEmitter();

myEmitter.on('event', (data) => {
    console.log('Event triggered:', data);
});

myEmitter.emit('event', 'Hello World');`
                    }
                ]
            },
            {
                id: 'core-modules',
                title: 'Core Modules',
                icon: '📦',
                description: 'Essential built-in modules that provide fundamental functionality in Node.js.',
                subtopics: [
                    {
                        title: 'File System (fs)',
                        description: 'Module for interacting with the file system - reading, writing, and manipulating files.',
                        scenario: 'Reading configuration files, processing uploaded images, or generating reports.',
                        code: `const fs = require('fs');

// Async file reading
fs.readFile('config.json', 'utf8', (err, data) => {
    if (err) throw err;
    console.log('File content:', data);
});

// Sync file reading
const data = fs.readFileSync('config.json', 'utf8');

// Writing files
fs.writeFile('output.txt', 'Hello Node.js', (err) => {
    if (err) throw err;
    console.log('File saved!');
});`
                    },
                    {
                        title: 'HTTP Module',
                        description: 'Create HTTP servers and clients, handle requests and responses.',
                        scenario: 'Building REST APIs, web servers, or making HTTP requests to external services.',
                        code: `const http = require('http');
const url = require('url');

// Create HTTP server
const server = http.createServer((req, res) => {
    const parsedUrl = url.parse(req.url, true);
    
    if (parsedUrl.pathname === '/api/users') {
        res.writeHead(200, {'Content-Type': 'application/json'});
        res.end(JSON.stringify({users: ['John', 'Jane']}));
    } else {
        res.writeHead(404, {'Content-Type': 'text/plain'});
        res.end('Not Found');
    }
});

server.listen(3000);`
                    }
                ]
            },
            {
                id: 'express-framework',
                title: 'Express.js Framework',
                icon: '🚂',
                description: 'The most popular Node.js web framework for building APIs and web applications.',
                subtopics: [
                    {
                        title: 'Basic Express Setup',
                        description: 'Setting up an Express server with routes and middleware.',
                        scenario: 'Creating a REST API for a blog or e-commerce application.',
                        code: `const express = require('express');
const app = express();
const port = process.env.PORT || 3000;

// Middleware
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Basic routes
app.get('/', (req, res) => {
    res.json({ message: 'Welcome to our API!' });
});

app.get('/api/users', (req, res) => {
    res.json([
        { id: 1, name: 'John Doe', email: 'john@example.com' },
        { id: 2, name: 'Jane Smith', email: 'jane@example.com' }
    ]);
});

app.listen(port, () => {
    console.log(\`Server running on port \${port}\`);
});`
                    },
                    {
                        title: 'Middleware',
                        description: 'Functions that execute during the request-response cycle.',
                        scenario: 'Authentication, logging, error handling, and request validation.',
                        code: `// Custom middleware
const logger = (req, res, next) => {
    console.log(\`\${new Date().toISOString()} - \${req.method} \${req.path}\`);
    next(); // Continue to next middleware
};

const authenticate = (req, res, next) => {
    const token = req.header('Authorization');
    if (!token) {
        return res.status(401).json({ error: 'Access denied' });
    }
    // Verify token logic here
    next();
};

// Apply middleware
app.use(logger); // Global middleware
app.use('/api/protected', authenticate); // Route-specific

// Error handling middleware
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({ error: 'Something went wrong!' });
});`
                    }
                ]
            },
            {
                id: 'async-programming',
                title: 'Asynchronous Programming',
                icon: '⚡',
                description: 'Callbacks, Promises, async/await, and handling asynchronous operations.',
                subtopics: [
                    {
                        title: 'Promises',
                        description: 'A better way to handle asynchronous operations with cleaner syntax.',
                        scenario: 'API calls, database operations, file processing with better error handling.',
                        code: `const fs = require('fs').promises;

// Promise-based file reading
function readFilePromise(filename) {
    return fs.readFile(filename, 'utf8');
}

// Usage with .then()
readFilePromise('config.json')
    .then(data => console.log('File content:', data))
    .catch(err => console.error('Error:', err));

// Promise.all for parallel execution
Promise.all([
    readFilePromise('file1.txt'),
    readFilePromise('file2.txt')
])
.then(([data1, data2]) => {
    console.log('All files read:', data1, data2);
})
.catch(err => console.error('Error:', err));`
                    },
                    {
                        title: 'Async/Await',
                        description: 'Modern syntax for handling asynchronous operations with synchronous-like code.',
                        scenario: 'Clean API development, sequential file processing, database transactions.',
                        code: `const fs = require('fs').promises;

// Async function
async function readMultipleFiles() {
    try {
        const data1 = await fs.readFile('file1.txt', 'utf8');
        const data2 = await fs.readFile('file2.txt', 'utf8');
        const combined = data1 + data2;
        
        await fs.writeFile('combined.txt', combined);
        console.log('Files combined successfully!');
        
        return combined;
    } catch (error) {
        console.error('Error:', error);
        throw error;
    }
}

// Usage
readMultipleFiles()
    .then(result => console.log('Result:', result))
    .catch(err => console.error('Failed:', err));`
                    }
                ]
            },
            {
                id: 'database-integration',
                title: 'Database Integration',
                icon: '🗄️',
                description: 'Connecting to and working with databases like MongoDB, MySQL, and PostgreSQL.',
                subtopics: [
                    {
                        title: 'MongoDB with Mongoose',
                        description: 'Object Data Modeling library for MongoDB and Node.js.',
                        scenario: 'Building user management systems, content management, or e-commerce platforms.',
                        code: `const mongoose = require('mongoose');

// Connect to MongoDB
mongoose.connect('mongodb://localhost:27017/myapp');

// Define schema
const userSchema = new mongoose.Schema({
    name: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    age: { type: Number, min: 0, max: 120 },
    createdAt: { type: Date, default: Date.now }
});

// Create model
const User = mongoose.model('User', userSchema);

// CRUD operations
async function userOperations() {
    try {
        // Create
        const newUser = new User({
            name: 'John Doe',
            email: 'john@example.com',
            age: 30
        });
        await newUser.save();

        // Read
        const users = await User.find();
        const user = await User.findById(newUser._id);

        // Update
        await User.findByIdAndUpdate(user._id, { age: 31 });

        // Delete
        await User.findByIdAndDelete(user._id);
    } catch (error) {
        console.error('Database error:', error);
    }
}`
                    }
                ]
            },
            {
                id: 'streams-buffers',
                title: 'Streams & Buffers',
                icon: '🌊',
                description: 'Handling large data efficiently with streams and working with binary data using buffers.',
                subtopics: [
                    {
                        title: 'Working with Streams',
                        description: 'Reading and writing large files efficiently using streams.',
                        scenario: 'Processing large CSV files, reading massive log files, or streaming video content.',
                        code: `const fs = require('fs');
const readline = require('readline');

// Reading large files with streams
const readableStream = fs.createReadStream('large-file.txt', {
    encoding: 'utf8',
    highWaterMark: 1024 // 1KB chunks
});

readableStream.on('data', (chunk) => {
    console.log('Received chunk:', chunk.length, 'bytes');
    // Process chunk
});

readableStream.on('end', () => {
    console.log('Finished reading file');
});

// Reading line by line
const fileStream = fs.createReadStream('data.csv');
const rl = readline.createInterface({
    input: fileStream,
    crlfDelay: Infinity
});

rl.on('line', (line) => {
    console.log('Processing line:', line);
});`
                    },
                    {
                        title: 'Buffer Operations',
                        description: 'Working with binary data and raw bytes in Node.js.',
                        scenario: 'File uploads, image processing, binary protocol handling, encryption.',
                        code: `// Creating buffers
const buf1 = Buffer.alloc(10); // Creates 10-byte buffer filled with zeros
const buf2 = Buffer.from('Hello World', 'utf8');
const buf3 = Buffer.from([72, 101, 108, 108, 111]); // From array

console.log(buf2.toString()); // 'Hello World'
console.log(buf2.toString('hex')); // Hexadecimal representation

// Buffer operations
const buffer = Buffer.alloc(20);
buffer.write('Hello', 0, 'utf8');
buffer.write('World', 5, 'utf8');

// Reading from buffer
console.log(buffer.slice(0, 5).toString()); // 'Hello'
console.log(buffer.readUInt8(0)); // Read byte at position 0

// Binary file processing
function processImageBuffer(filePath) {
    const imageBuffer = fs.readFileSync(filePath);
    
    // Check if it's a PNG file
    const pngSignature = Buffer.from([0x89, 0x50, 0x4E, 0x47]);
    const isPNG = imageBuffer.slice(0, 4).equals(pngSignature);
    
    console.log('Is PNG:', isPNG);
    console.log('File size:', imageBuffer.length, 'bytes');
    
    return imageBuffer;
}`
                    }
                ]
            },
            {
                id: 'testing',
                title: 'Testing',
                icon: '🧪',
                description: 'Unit testing, integration testing, and test-driven development practices.',
                subtopics: [
                    {
                        title: 'Jest Testing Framework',
                        description: 'Popular testing framework for Node.js applications with mocking capabilities.',
                        scenario: 'Testing API endpoints, business logic, and database operations.',
                        code: `// __tests__/user.test.js
const request = require('supertest');
const app = require('../app');

describe('User API', () => {
    describe('GET /api/users', () => {
        test('should return all users', async () => {
            const response = await request(app)
                .get('/api/users')
                .expect(200);

            expect(response.body).toHaveLength(2);
        });
    });

    describe('POST /api/users', () => {
        test('should create a new user', async () => {
            const userData = {
                name: 'New User',
                email: 'newuser@test.com'
            };

            const response = await request(app)
                .post('/api/users')
                .send(userData)
                .expect(201);

            expect(response.body.name).toBe(userData.name);
        });
    });
});`
                    }
                ]
            },
            {
                id: 'websockets',
                title: 'WebSockets & Real-time',
                icon: '🔄',
                description: 'Real-time communication using WebSockets, Socket.IO, and Server-Sent Events.',
                subtopics: [
                    {
                        title: 'Socket.IO Implementation',
                        description: 'Full-featured WebSocket library with fallbacks and advanced features.',
                        scenario: 'Chat applications, live notifications, collaborative editing, real-time dashboards.',
                        code: `const express = require('express');
const http = require('http');
const socketIo = require('socket.io');

const app = express();
const server = http.createServer(app);
const io = socketIo(server);

io.on('connection', (socket) => {
    console.log('User connected:', socket.id);
    
    // Join room
    socket.on('joinRoom', (roomId) => {
        socket.join(roomId);
        socket.to(roomId).emit('userJoined', {
            userId: socket.id,
            message: 'A user joined the room'
        });
    });
    
    // Handle messages
    socket.on('sendMessage', (data) => {
        const { roomId, message } = data;
        io.to(roomId).emit('newMessage', {
            userId: socket.id,
            message,
            timestamp: new Date()
        });
    });
    
    socket.on('disconnect', () => {
        console.log('User disconnected:', socket.id);
    });
});

server.listen(3000, () => {
    console.log('Socket.IO server running on port 3000');
});`
                    }
                ]
            },
            {
                id: 'security',
                title: 'Security Best Practices',
                icon: '🔒',
                description: 'Advanced security measures, encryption, input validation, and protection against common attacks.',
                subtopics: [
                    {
                        title: 'Input Validation & Sanitization',
                        description: 'Protecting against injection attacks and malicious input.',
                        scenario: 'Form submissions, API inputs, user-generated content, file uploads.',
                        code: `const Joi = require('joi');
const validator = require('validator');

// Joi validation schemas
const userSchema = Joi.object({
    name: Joi.string().min(2).max(50).required(),
    email: Joi.string().email().required(),
    password: Joi.string()
        .min(8)
        .pattern(new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])'))
        .required(),
    age: Joi.number().integer().min(13).max(120)
});

// Validation middleware
const validateInput = (schema) => {
    return (req, res, next) => {
        const { error, value } = schema.validate(req.body);
        
        if (error) {
            return res.status(400).json({
                error: error.details[0].message
            });
        }
        
        req.body = value; // Use validated data
        next();
    };
};

// Custom sanitization
const sanitizeInput = (req, res, next) => {
    const sanitize = (obj) => {
        for (let key in obj) {
            if (typeof obj[key] === 'string') {
                obj[key] = validator.escape(obj[key]);
            } else if (typeof obj[key] === 'object') {
                sanitize(obj[key]);
            }
        }
    };
    
    sanitize(req.body);
    sanitize(req.query);
    next();
};`
                    }
                ]
            },
            {
                id: 'deployment',
                title: 'Deployment & DevOps',
                icon: '🚀',
                description: 'Deploying Node.js applications to production environments and DevOps practices.',
                subtopics: [
                    {
                        title: 'Docker Containerization',
                        description: 'Containerizing Node.js applications for consistent deployment.',
                        scenario: 'Microservices deployment, cloud hosting, development environment consistency.',
                        code: `# Dockerfile
FROM node:18-alpine

WORKDIR /usr/src/app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci --only=production

# Copy application code
COPY . .

# Create non-root user
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nodejs -u 1001

# Change ownership
RUN chown -R nodejs:nodejs /usr/src/app
USER nodejs

EXPOSE 3000

# Start application
CMD ["node", "server.js"]

# docker-compose.yml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    depends_on:
      - mongodb
  
  mongodb:
    image: mongo:5.0
    ports:
      - "27017:27017"`
                    }
                ]
            }
        ];

        // Global variables
        let allTopics = [...nodeJsTopics];
        let filteredTopics = [...nodeJsTopics];

        // Main functions
        function createTopicCard(topic) {
            const card = document.createElement('div');
            card.className = 'topic-card';
            card.id = topic.id;
            
            const subtopicsHtml = topic.subtopics.map(subtopic => `
                <div class="subtopic">
                    <h4>${subtopic.title}</h4>
                    <p>${subtopic.description}</p>
                    ${subtopic.scenario ? `
                        <div class="example-scenario">
                            <h5>Real-world scenario:</h5>
                            <p>${subtopic.scenario}</p>
                        </div>
                    ` : ''}
                    ${subtopic.code ? `
                        <div class="code-block">${escapeHtml(subtopic.code)}</div>
                    ` : ''}
                </div>
            `).join('');
            
            card.innerHTML = `
                <h3>
                    <span class="icon">${topic.icon}</span>
                    ${topic.title}
                </h3>
                <p class="topic-description">${topic.description}</p>
                <button class="toggle-btn" onclick="toggleSubtopics('${topic.id}')">
                    Show Details
                </button>
                <div class="subtopics" id="subtopics-${topic.id}">
                    ${subtopicsHtml}
                </div>
            `;
            
            return card;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function renderTopics(topics = filteredTopics) {
            const container = document.getElementById('topicsGrid');
            container.innerHTML = '';
            
            if (topics.length === 0) {
                container.innerHTML = '<div class="no-results">No topics found. Try a different search term.</div>';
                return;
            }
            
            topics.forEach(topic => {
                container.appendChild(createTopicCard(topic));
            });
        }

        function createQuickLinks() {
            const container = document.getElementById('quickLinksContainer');
            if (!container) return;
            
            container.innerHTML = '';
            
            allTopics.forEach(topic => {
                const link = document.createElement('div');
                link.className = 'quick-link';
                link.textContent = topic.title;
                link.onclick = (e) => {
                    e.preventDefault();
                    const element = document.getElementById(topic.id);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                };
                container.appendChild(link);
            });
        }

        function toggleSubtopics(topicId) {
            const subtopics = document.getElementById(`subtopics-${topicId}`);
            const button = subtopics ? subtopics.previousElementSibling : null;
            
            if (!subtopics || !button) return;
            
            if (subtopics.classList.contains('active')) {
                subtopics.classList.remove('active');
                button.textContent = 'Show Details';
            } else {
                subtopics.classList.add('active');
                button.textContent = 'Hide Details';
            }
        }

        function searchTopics() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase().trim();
            
            if (searchTerm === '') {
                filteredTopics = [...allTopics];
            } else {
                filteredTopics = allTopics.filter(topic => {
                    // Search in title
                    if (topic.title.toLowerCase().includes(searchTerm)) return true;
                    
                    // Search in description
                    if (topic.description.toLowerCase().includes(searchTerm)) return true;
                    
                    // Search in subtopics
                    return topic.subtopics.some(subtopic => 
                        subtopic.title.toLowerCase().includes(searchTerm) ||
                        subtopic.description.toLowerCase().includes(searchTerm) ||
                        (subtopic.scenario && subtopic.scenario.toLowerCase().includes(searchTerm)) ||
                        (subtopic.code && subtopic.code.toLowerCase().includes(searchTerm))
                    );
                });
            }
            
            renderTopics(filteredTopics);
        }

        // Initialize the application
        function initializeApp() {
            try {
                renderTopics();
                createQuickLinks();
                
                // Add search functionality
                const searchBox = document.getElementById('searchBox');
                if (searchBox) {
                    searchBox.addEventListener('input', searchTopics);
                    
                    // Add search on Enter key
                    searchBox.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            searchTopics();
                        }
                    });
                }
                
                // Add keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    // Ctrl+F to focus search
                    if (e.ctrlKey && e.key === 'f') {
                        e.preventDefault();
                        const searchBox = document.getElementById('searchBox');
                        if (searchBox) {
                            searchBox.focus();
                            searchBox.select();
                        }
                    }
                    
                    // Escape to clear search
                    if (e.key === 'Escape') {
                        const searchBox = document.getElementById('searchBox');
                        if (searchBox && searchBox.value) {
                            searchBox.value = '';
                            searchTopics();
                        }
                    }
                });
                
            } catch (error) {
                console.error('Error initializing app:', error);
                const container = document.getElementById('topicsGrid');
                if (container) {
                    container.innerHTML = '<div class="no-results">Error loading topics. Please refresh the page.</div>';
                }
            }
        }

        // Make functions globally available
        window.toggleSubtopics = toggleSubtopics;

        // Initialize when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }

        // Add some helpful console messages
        console.log('🚀 Node.js Cheat Sheet loaded successfully!');
        console.log('💡 Tips:');
        console.log('  - Use Ctrl+F to quickly search topics');
        console.log('  - Click "Show Details" to see code examples');
        console.log('  - Use the sidebar for quick navigation');
        console.log('  - All code examples are production-ready!');
    </script>
</body>
</html>