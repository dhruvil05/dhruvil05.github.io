<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Complexity in DSA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .subtitle {
            color: #666;
            font-size: 1.1rem;
        }

        h2 {
            font-size: 1.8rem;
            margin: 50px 0 20px;
            font-weight: 600;
        }

        h3 {
            font-size: 1.3rem;
            margin: 30px 0 15px;
            font-weight: 500;
        }

        p {
            margin-bottom: 15px;
            color: #333;
        }

        .intro {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 40px;
        }

        .complexity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .complexity-card {
            padding: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            transition: box-shadow 0.3s;
        }

        .complexity-card:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .complexity-card h3 {
            margin-top: 0;
            font-size: 1.2rem;
            display: flex;
            align-items: baseline;
            gap: 10px;
        }

        .notation {
            font-family: 'Courier New', monospace;
            color: #0066cc;
            font-size: 1rem;
        }

        .performance {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-left: auto;
        }

        .best {
            background: #e7f5e7;
            color: #2d6e2d;
        }

        .good {
            background: #e3f2fd;
            color: #1565c0;
        }

        .moderate {
            background: #fff3e0;
            color: #e65100;
        }

        .poor {
            background: #ffebee;
            color: #c62828;
        }

        .chart-container {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
            margin: 30px 0;
        }

        .chart-controls {
            margin-bottom: 30px;
        }

        .slider-control {
            max-width: 500px;
            margin: 0 auto;
        }

        .slider-control label {
            display: block;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .slider-control input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1a1a1a;
            cursor: pointer;
        }

        .slider-control input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1a1a1a;
            cursor: pointer;
            border: none;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .complexity-comparison {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e0e0e0;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .complexity-comparison:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .comparison-header {
            margin-bottom: 15px;
        }

        .complexity-name {
            display: block;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 5px;
        }

        .complexity-label {
            display: block;
            font-size: 0.85rem;
            color: #666;
        }

        .bar-container {
            height: 150px;
            background: #f5f5f5;
            border-radius: 4px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 10px;
            margin: 10px 0;
        }

        .comparison-bar {
            width: 60%;
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
            min-height: 5px;
        }

        .operations-count {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1a1a1a;
            margin-top: 10px;
        }

        .operations-count::after {
            content: ' ops';
            font-size: 0.75rem;
            color: #666;
            font-weight: 400;
        }

        .insights {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 4px solid #1a1a1a;
        }

        .insights p {
            margin: 10px 0;
            line-height: 1.8;
        }

        .analyzer {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
            margin: 30px 0;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
        }

        .control-group {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }

        input[type="number"],
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        input[type="range"] {
            width: 70%;
            margin-right: 10px;
        }

        button {
            padding: 12px 24px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            background: #1a1a1a;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        button:hover:not(:disabled) {
            background: #333;
            transform: translateY(-1px);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .action-buttons button {
            flex: 1;
            min-width: 120px;
        }

        .visualization-area {
            background: white;
            padding: 30px;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
            margin: 20px 0;
            min-height: 300px;
        }

        .array-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 4px;
            height: 200px;
            margin-bottom: 30px;
            padding: 10px;
        }

        .array-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.3s ease;
        }

        .array-bar {
            background: #ddd;
            border-radius: 4px 4px 0 0;
            min-width: 30px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .array-value {
            font-size: 0.85rem;
            font-weight: 600;
            color: #333;
        }

        .array-index {
            font-size: 0.75rem;
            color: #666;
            margin-top: 5px;
        }

        .array-bar.current {
            background: #ffd54f;
            transform: translateY(-5px);
        }

        .array-bar.comparing {
            background: #64b5f6;
            transform: translateY(-5px);
        }

        .array-bar.found {
            background: #81c784;
        }

        .array-bar.sorted {
            background: #81c784;
        }

        .array-bar.target {
            background: #e57373;
            transform: translateY(-5px);
        }

        .info-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 4px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 5px;
        }

        .info-item span:last-child {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1a1a1a;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 30px;
            height: 20px;
            border-radius: 3px;
            border: 1px solid #ddd;
        }

        .legend-color.current {
            background: #ffd54f;
        }

        .legend-color.comparing {
            background: #64b5f6;
        }

        .legend-color.found {
            background: #81c784;
        }

        .legend-color.target {
            background: #e57373;
        }

        .code-block {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 4px;
            border-left: 3px solid #1a1a1a;
            margin: 20px 0;
            overflow-x: auto;
        }

        pre {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        code {
            font-family: 'Courier New', monospace;
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: white;
        }

        th,
        td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: #f9f9f9;
            font-weight: 600;
        }

        tr:hover {
            background: #fafafa;
        }

        .takeaways {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
            margin: 40px 0;
        }

        .takeaways ul {
            list-style: none;
            padding: 0;
        }

        .takeaways li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
        }

        .takeaways li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }

            .container {
                padding: 20px 15px;
            }

            .complexity-grid {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
            }

            .control-group {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Time Complexity in DSA</h1>
            <p class="subtitle">Understanding algorithm efficiency and performance</p>
        </header>

        <section>
            <div class="intro">
                <h2 style="margin-top: 0;">What is Time Complexity?</h2>
                <p>Time Complexity measures how an algorithm's execution time changes as the input size grows. It helps
                    you choose the most efficient algorithm for your problem.</p>
                <p><strong>Why it matters:</strong> Understanding time complexity allows you to predict performance,
                    especially with large datasets, and make informed decisions about which algorithm to use.</p>
            </div>
        </section>

        <section>
            <h2>Common Time Complexities</h2>
            <div class="complexity-grid">
                <div class="complexity-card">
                    <h3><span class="notation">O(1)</span> <span class="performance best">Best</span></h3>
                    <p><strong>Constant Time</strong></p>
                    <p>Execution time stays the same regardless of input size.</p>
                    <p><em>Example: Accessing an array element by index</em></p>
                </div>

                <div class="complexity-card">
                    <h3><span class="notation">O(log n)</span> <span class="performance best">Excellent</span></h3>
                    <p><strong>Logarithmic Time</strong></p>
                    <p>Time grows very slowly as input increases. Very efficient.</p>
                    <p><em>Example: Binary search in a sorted array</em></p>
                </div>

                <div class="complexity-card">
                    <h3><span class="notation">O(n)</span> <span class="performance good">Good</span></h3>
                    <p><strong>Linear Time</strong></p>
                    <p>Time grows proportionally with input size.</p>
                    <p><em>Example: Finding an item in an unsorted array</em></p>
                </div>

                <div class="complexity-card">
                    <h3><span class="notation">O(n log n)</span> <span class="performance good">Good</span></h3>
                    <p><strong>Linearithmic Time</strong></p>
                    <p>Common in efficient sorting algorithms.</p>
                    <p><em>Example: Merge sort, Quick sort</em></p>
                </div>

                <div class="complexity-card">
                    <h3><span class="notation">O(n¬≤)</span> <span class="performance moderate">Moderate</span></h3>
                    <p><strong>Quadratic Time</strong></p>
                    <p>Becomes slow with large inputs. Often involves nested loops.</p>
                    <p><em>Example: Bubble sort, Selection sort</em></p>
                </div>

                <div class="complexity-card">
                    <h3><span class="notation">O(2‚Åø)</span> <span class="performance poor">Poor</span></h3>
                    <p><strong>Exponential Time</strong></p>
                    <p>Very slow. Avoid for large inputs when possible.</p>
                    <p><em>Example: Recursive Fibonacci (naive approach)</em></p>
                </div>
            </div>
        </section>

        <section>
            <h2>Growth Rate Visualization</h2>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">
                See how different time complexities scale as input size increases
            </p>

            <div class="chart-container">
                <div class="chart-controls">
                    <div class="slider-control">
                        <label for="inputSlider">Input Size: <strong id="inputValue">10</strong></label>
                        <input type="range" id="inputSlider" min="1" max="50" value="10"
                            oninput="updateComparison(this.value)">
                    </div>
                </div>

                <div class="comparison-grid">
                    <div class="complexity-comparison" data-complexity="O(1)">
                        <div class="comparison-header">
                            <span class="complexity-name">O(1)</span>
                            <span class="complexity-label">Constant</span>
                        </div>
                        <div class="bar-container">
                            <div class="comparison-bar" id="bar-o1" style="background: #2d6e2d;"></div>
                        </div>
                        <div class="operations-count" id="ops-o1">1</div>
                    </div>

                    <div class="complexity-comparison" data-complexity="O(log n)">
                        <div class="comparison-header">
                            <span class="complexity-name">O(log n)</span>
                            <span class="complexity-label">Logarithmic</span>
                        </div>
                        <div class="bar-container">
                            <div class="comparison-bar" id="bar-ologn" style="background: #1565c0;"></div>
                        </div>
                        <div class="operations-count" id="ops-ologn">1</div>
                    </div>

                    <div class="complexity-comparison" data-complexity="O(n)">
                        <div class="comparison-header">
                            <span class="complexity-name">O(n)</span>
                            <span class="complexity-label">Linear</span>
                        </div>
                        <div class="bar-container">
                            <div class="comparison-bar" id="bar-on" style="background: #e65100;"></div>
                        </div>
                        <div class="operations-count" id="ops-on">10</div>
                    </div>

                    <div class="complexity-comparison" data-complexity="O(n log n)">
                        <div class="comparison-header">
                            <span class="complexity-name">O(n log n)</span>
                            <span class="complexity-label">Linearithmic</span>
                        </div>
                        <div class="bar-container">
                            <div class="comparison-bar" id="bar-onlogn" style="background: #c62828;"></div>
                        </div>
                        <div class="operations-count" id="ops-onlogn">33</div>
                    </div>

                    <div class="complexity-comparison" data-complexity="O(n¬≤)">
                        <div class="comparison-header">
                            <span class="complexity-name">O(n¬≤)</span>
                            <span class="complexity-label">Quadratic</span>
                        </div>
                        <div class="bar-container">
                            <div class="comparison-bar" id="bar-on2" style="background: #7b1fa2;"></div>
                        </div>
                        <div class="operations-count" id="ops-on2">100</div>
                    </div>

                    <div class="complexity-comparison" data-complexity="O(2‚Åø)">
                        <div class="comparison-header">
                            <span class="complexity-name">O(2‚Åø)</span>
                            <span class="complexity-label">Exponential</span>
                        </div>
                        <div class="bar-container">
                            <div class="comparison-bar" id="bar-o2n" style="background: #d32f2f;"></div>
                        </div>
                        <div class="operations-count" id="ops-o2n">1024</div>
                    </div>
                </div>

                <div class="insights">
                    <h3 style="margin-top: 0;">üí° Key Insights</h3>
                    <div id="insightText">
                        <p>At n=10, notice how O(1) always performs just 1 operation, while O(2‚Åø) requires 1,024
                            operations!</p>
                        <p>Try moving the slider to see how quickly exponential complexity grows.</p>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>Interactive Algorithm Analyzer</h2>
            <div class="analyzer">
                <div class="controls">
                    <div class="control-group">
                        <label for="inputSize">Array Size:</label>
                        <input type="range" id="inputSize" value="10" min="5" max="20"
                            oninput="updateSizeDisplay(this.value)">
                        <span id="sizeDisplay">10</span>
                    </div>
                    <div class="control-group">
                        <label for="algorithm">Algorithm:</label>
                        <select id="algorithm" onchange="resetVisualization()">
                            <option value="linear">Linear Search - O(n)</option>
                            <option value="binary">Binary Search - O(log n)</option>
                            <option value="bubble">Bubble Sort - O(n¬≤)</option>
                            <option value="selection">Selection Sort - O(n¬≤)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="speed">Animation Speed:</label>
                        <input type="range" id="speed" value="500" min="100" max="1000" step="100"
                            oninput="updateSpeedDisplay(this.value)">
                        <span id="speedDisplay">Medium</span>
                    </div>
                </div>

                <div class="action-buttons">
                    <button onclick="generateArray()" id="generateBtn">Generate Array</button>
                    <button onclick="runAlgorithm()" id="runBtn" disabled>Run Algorithm</button>
                    <button onclick="stopAlgorithm()" id="stopBtn" disabled>Stop</button>
                </div>

                <div class="visualization-area">
                    <div id="arrayDisplay" class="array-container"></div>
                    <div id="infoPanel" class="info-panel">
                        <div class="info-item">
                            <span class="info-label">Status:</span>
                            <span id="statusText">Generate an array to begin</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Operations:</span>
                            <span id="operationCount">0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Comparisons:</span>
                            <span id="comparisonCount">0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Time:</span>
                            <span id="timeDisplay">0ms</span>
                        </div>
                    </div>
                </div>

                <div class="legend">
                    <div class="legend-item"><span class="legend-color current"></span> Current</div>
                    <div class="legend-item"><span class="legend-color comparing"></span> Comparing</div>
                    <div class="legend-item"><span class="legend-color found"></span> Found/Sorted</div>
                    <div class="legend-item"><span class="legend-color target"></span> Target</div>
                </div>
            </div>
        </section>

        <section>
            <h2>Code Examples</h2>

            <h3>O(1) - Constant Time</h3>
            <div class="code-block">
                <pre>function getFirstElement(arr) {
    return arr[0];  // Always takes the same time
}</pre>
            </div>

            <h3>O(n) - Linear Time</h3>
            <div class="code-block">
                <pre>function linearSearch(arr, target) {
    for (let i = 0; i < arr.length; i++) {
        if (arr[i] === target) return i;
    }
    return -1;  // Time grows with array size
}</pre>
            </div>

            <h3>O(n¬≤) - Quadratic Time</h3>
            <div class="code-block">
                <pre>function bubbleSort(arr) {
    for (let i = 0; i < arr.length; i++) {
        for (let j = 0; j < arr.length - 1; j++) {
            if (arr[j] > arr[j + 1]) {
                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
            }
        }
    }
    return arr;  // Nested loops = n √ó n operations
}</pre>
            </div>
        </section>

        <section>
            <h2>Algorithm Comparison</h2>
            <table>
                <thead>
                    <tr>
                        <th>Algorithm</th>
                        <th>Best Case</th>
                        <th>Average Case</th>
                        <th>Worst Case</th>
                        <th>Space</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Linear Search</td>
                        <td>O(1)</td>
                        <td>O(n)</td>
                        <td>O(n)</td>
                        <td>O(1)</td>
                    </tr>
                    <tr>
                        <td>Binary Search</td>
                        <td>O(1)</td>
                        <td>O(log n)</td>
                        <td>O(log n)</td>
                        <td>O(1)</td>
                    </tr>
                    <tr>
                        <td>Bubble Sort</td>
                        <td>O(n)</td>
                        <td>O(n¬≤)</td>
                        <td>O(n¬≤)</td>
                        <td>O(1)</td>
                    </tr>
                    <tr>
                        <td>Merge Sort</td>
                        <td>O(n log n)</td>
                        <td>O(n log n)</td>
                        <td>O(n log n)</td>
                        <td>O(n)</td>
                    </tr>
                    <tr>
                        <td>Quick Sort</td>
                        <td>O(n log n)</td>
                        <td>O(n log n)</td>
                        <td>O(n¬≤)</td>
                        <td>O(log n)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <div class="takeaways">
                <h2 style="margin-top: 0;">Key Takeaways</h2>
                <ul>
                    <li><strong>Focus on worst-case scenarios</strong> when analyzing algorithms to ensure reliability
                    </li>
                    <li><strong>Simplify to the dominant term</strong> - O(n¬≤ + n) becomes O(n¬≤) since n¬≤ grows much
                        faster</li>
                    <li><strong>Ignore constants</strong> in Big O notation - O(5n) simplifies to O(n)</li>
                    <li><strong>Choose wisely</strong> - O(n¬≤) algorithms can be acceptable for small, fixed inputs</li>
                    <li><strong>Consider trade-offs</strong> - faster algorithms may require more memory</li>
                </ul>
            </div>
        </section>
    </div>

    <script>
        let currentArray = [];
        let isRunning = false;
        let shouldStop = false;
        let startTime = 0;

        function updateSizeDisplay(value) {
            document.getElementById('sizeDisplay').textContent = value;
        }

        function updateSpeedDisplay(value) {
            const speeds = { 100: 'Very Fast', 300: 'Fast', 500: 'Medium', 700: 'Slow', 1000: 'Very Slow' };
            document.getElementById('speedDisplay').textContent = speeds[value] || 'Medium';
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function generateArray() {
            if (isRunning) return;

            const size = parseInt(document.getElementById('inputSize').value);
            currentArray = Array.from({ length: size }, () => Math.floor(Math.random() * 99) + 1);

            displayArray();
            resetCounters();
            updateStatus('Array generated. Ready to run!');

            document.getElementById('runBtn').disabled = false;
            document.getElementById('generateBtn').disabled = false;
        }

        function displayArray(highlights = {}) {
            const container = document.getElementById('arrayDisplay');
            const maxValue = Math.max(...currentArray);

            container.innerHTML = '';

            currentArray.forEach((value, index) => {
                const item = document.createElement('div');
                item.className = 'array-item';

                const bar = document.createElement('div');
                bar.className = 'array-bar';
                bar.style.height = `${(value / maxValue) * 150}px`;

                if (highlights[index]) {
                    bar.classList.add(highlights[index]);
                }

                const valueSpan = document.createElement('span');
                valueSpan.className = 'array-value';
                valueSpan.textContent = value;

                const indexSpan = document.createElement('span');
                indexSpan.className = 'array-index';
                indexSpan.textContent = index;

                bar.appendChild(valueSpan);
                item.appendChild(bar);
                item.appendChild(indexSpan);
                container.appendChild(item);
            });
        }

        function resetCounters() {
            document.getElementById('operationCount').textContent = '0';
            document.getElementById('comparisonCount').textContent = '0';
            document.getElementById('timeDisplay').textContent = '0ms';
        }

        function updateStatus(text) {
            document.getElementById('statusText').textContent = text;
        }

        function updateCounters(operations, comparisons) {
            document.getElementById('operationCount').textContent = operations;
            document.getElementById('comparisonCount').textContent = comparisons;
            const elapsed = Date.now() - startTime;
            document.getElementById('timeDisplay').textContent = elapsed + 'ms';
        }

        function resetVisualization() {
            if (!isRunning && currentArray.length > 0) {
                displayArray();
            }
        }

        async function runAlgorithm() {
            if (currentArray.length === 0 || isRunning) return;

            isRunning = true;
            shouldStop = false;
            startTime = Date.now();

            document.getElementById('runBtn').disabled = true;
            document.getElementById('generateBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;

            const algo = document.getElementById('algorithm').value;
            const speed = parseInt(document.getElementById('speed').value);

            try {
                if (algo === 'linear') {
                    await linearSearch(speed);
                } else if (algo === 'binary') {
                    await binarySearch(speed);
                } else if (algo === 'bubble') {
                    await bubbleSort(speed);
                } else if (algo === 'selection') {
                    await selectionSort(speed);
                }
            } catch (e) {
                console.error(e);
            }

            isRunning = false;
            document.getElementById('runBtn').disabled = false;
            document.getElementById('generateBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
        }

        function stopAlgorithm() {
            shouldStop = true;
            updateStatus('Stopped by user');
        }

        async function linearSearch(speed) {
            const target = currentArray[Math.floor(Math.random() * currentArray.length)];
            updateStatus(`Searching for ${target}...`);

            let operations = 0, comparisons = 0;

            for (let i = 0; i < currentArray.length; i++) {
                if (shouldStop) break;

                operations++;
                comparisons++;

                displayArray({ [i]: 'current' });
                updateCounters(operations, comparisons);
                await sleep(speed);

                if (currentArray[i] === target) {
                    displayArray({ [i]: 'found' });
                    updateStatus(`Found ${target} at index ${i}!`);
                    return;
                }
            }

            updateStatus(`${target} not found in array`);
        }

        async function binarySearch(speed) {
            const sorted = [...currentArray].sort((a, b) => a - b);
            currentArray = sorted;
            displayArray();
            await sleep(speed);

            const target = sorted[Math.floor(Math.random() * sorted.length)];
            updateStatus(`Binary search for ${target} in sorted array...`);

            let operations = 0, comparisons = 0;
            let left = 0, right = sorted.length - 1;

            while (left <= right) {
                if (shouldStop) break;

                operations++;
                const mid = Math.floor((left + right) / 2);

                const highlights = {};
                for (let i = left; i <= right; i++) {
                    highlights[i] = 'comparing';
                }
                highlights[mid] = 'current';

                displayArray(highlights);
                updateCounters(operations, comparisons);
                await sleep(speed);

                comparisons++;
                if (sorted[mid] === target) {
                    displayArray({ [mid]: 'found' });
                    updateStatus(`Found ${target} at index ${mid}!`);
                    updateCounters(operations, comparisons);
                    return;
                } else if (sorted[mid] < target) {
                    left = mid + 1;
                } else {
                    right = mid - 1;
                }
            }

            updateStatus(`${target} not found`);
        }

        async function bubbleSort(speed) {
            updateStatus('Bubble sort in progress...');
            let operations = 0, comparisons = 0;

            for (let i = 0; i < currentArray.length; i++) {
                if (shouldStop) break;

                for (let j = 0; j < currentArray.length - i - 1; j++) {
                    if (shouldStop) break;

                    operations++;
                    comparisons++;

                    const highlights = {};
                    for (let k = currentArray.length - i; k < currentArray.length; k++) {
                        highlights[k] = 'sorted';
                    }
                    highlights[j] = 'current';
                    highlights[j + 1] = 'comparing';

                    displayArray(highlights);
                    updateCounters(operations, comparisons);
                    await sleep(speed / 2);

                    if (currentArray[j] > currentArray[j + 1]) {
                        [currentArray[j], currentArray[j + 1]] = [currentArray[j + 1], currentArray[j]];
                        displayArray(highlights);
                        await sleep(speed / 2);
                    }
                }
            }

            const sortedHighlights = {};
            for (let i = 0; i < currentArray.length; i++) {
                sortedHighlights[i] = 'sorted';
            }
            displayArray(sortedHighlights);
            updateStatus('Bubble sort complete!');
        }

        async function selectionSort(speed) {
            updateStatus('Selection sort in progress...');
            let operations = 0, comparisons = 0;

            for (let i = 0; i < currentArray.length - 1; i++) {
                if (shouldStop) break;

                let minIdx = i;

                for (let j = i + 1; j < currentArray.length; j++) {
                    if (shouldStop) break;

                    operations++;
                    comparisons++;

                    const highlights = {};
                    for (let k = 0; k < i; k++) {
                        highlights[k] = 'sorted';
                    }
                    highlights[minIdx] = 'current';
                    highlights[j] = 'comparing';

                    displayArray(highlights);
                    updateCounters(operations, comparisons);
                    await sleep(speed / 2);

                    if (currentArray[j] < currentArray[minIdx]) {
                        minIdx = j;
                    }
                }

                if (minIdx !== i) {
                    [currentArray[i], currentArray[minIdx]] = [currentArray[minIdx], currentArray[i]];
                }

                const highlights = {};
                for (let k = 0; k <= i; k++) {
                    highlights[k] = 'sorted';
                }
                displayArray(highlights);
                await sleep(speed / 2);
            }

            const sortedHighlights = {};
            for (let i = 0; i < currentArray.length; i++) {
                sortedHighlights[i] = 'sorted';
            }
            displayArray(sortedHighlights);
            updateStatus('Selection sort complete!');
        }

        // Draw complexity chart
        function drawChart() {
            // Chart functionality replaced by interactive comparison
        }

        function updateComparison(n) {
            n = parseInt(n);
            document.getElementById('inputValue').textContent = n;

            // Calculate operations for each complexity
            const o1 = 1;
            const ologn = Math.max(1, Math.ceil(Math.log2(n)));
            const on = n;
            const onlogn = Math.ceil(n * Math.log2(Math.max(n, 2)));
            const on2 = n * n;
            const o2n = n <= 15 ? Math.pow(2, n) : Math.pow(2, 15); // Cap for display

            const maxOps = Math.max(o1, ologn, on, onlogn, on2, o2n);

            // Update bars and counts
            updateBar('o1', o1, maxOps);
            updateBar('ologn', ologn, maxOps);
            updateBar('on', on, maxOps);
            updateBar('onlogn', onlogn, maxOps);
            updateBar('on2', on2, maxOps);
            updateBar('o2n', o2n, maxOps);

            // Update insights based on n value
            updateInsights(n, { o1, ologn, on, onlogn, on2, o2n });
        }

        function updateBar(id, ops, maxOps) {
            const bar = document.getElementById(`bar-${id}`);
            const opsDisplay = document.getElementById(`ops-${id}`);

            const height = (ops / maxOps) * 100;
            bar.style.height = Math.max(height, 3) + '%';

            // Format large numbers
            if (ops >= 1000000) {
                opsDisplay.textContent = (ops / 1000000).toFixed(1) + 'M';
            } else if (ops >= 1000) {
                opsDisplay.textContent = (ops / 1000).toFixed(1) + 'K';
            } else {
                opsDisplay.textContent = Math.round(ops);
            }
        }

        function updateInsights(n, ops) {
            const insightDiv = document.getElementById('insightText');
            let insights = '';

            if (n <= 5) {
                insights = `
                    <p>With small inputs (n=${n}), even O(n¬≤) and O(2‚Åø) perform reasonably well.</p>
                    <p>The difference between complexities isn't dramatic yet.</p>
                `;
            } else if (n <= 10) {
                insights = `
                    <p>At n=${n}, O(2‚Åø) requires ${ops.o2n.toLocaleString()} operations while O(1) still needs just 1!</p>
                    <p>Exponential growth is becoming noticeable.</p>
                `;
            } else if (n <= 20) {
                insights = `
                    <p>At n=${n}, the gap widens dramatically:</p>
                    <p>‚Ä¢ O(1) = ${ops.o1} operation</p>
                    <p>‚Ä¢ O(n) = ${ops.on} operations</p>
                    <p>‚Ä¢ O(n¬≤) = ${ops.on2.toLocaleString()} operations</p>
                `;
            } else if (n <= 30) {
                insights = `
                    <p>At n=${n}, O(n¬≤) requires ${ops.on2.toLocaleString()} operations!</p>
                    <p>This is why choosing the right algorithm matters for larger datasets.</p>
                    <p>Notice how O(log n) stays incredibly efficient at just ${ops.ologn} operations.</p>
                `;
            } else {
                insights = `
                    <p>At n=${n}, the differences are massive:</p>
                    <p>‚Ä¢ O(log n) = ${ops.ologn} operations (extremely efficient!)</p>
                    <p>‚Ä¢ O(n) = ${ops.on} operations (linear growth)</p>
                    <p>‚Ä¢ O(n¬≤) = ${ops.on2.toLocaleString()} operations (getting slow!)</p>
                    <p>This demonstrates why algorithm choice is critical for large-scale applications.</p>
                `;
            }

            insightDiv.innerHTML = insights;
        }

        // Initialize on load
        window.addEventListener('load', () => {
            updateComparison(10);
        });
    </script>
</body>

</html>