<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js Process Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1em;
            font-weight: 500;
            color: #495057;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .content {
            padding: 40px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        h3 {
            color: #34495e;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        p {
            line-height: 1.8;
            color: #555;
            margin-bottom: 15px;
        }

        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .code-block .keyword {
            color: #c678dd;
        }

        .code-block .string {
            color: #98c379;
        }

        .code-block .function {
            color: #61afef;
        }

        .code-block .comment {
            color: #5c6370;
            font-style: italic;
        }

        .highlight-box {
            background: #e8f4fd;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .highlight-box strong {
            color: #667eea;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        ul {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        li {
            line-height: 1.8;
            color: #555;
            margin-bottom: 10px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card h4 {
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .best-practice {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .nav-tab {
                padding: 12px 15px;
                font-size: 0.9em;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>ðŸ“¦ Node.js Process Management</h1>
            <p>Complete Guide to Managing Processes in Node.js Applications</p>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">Overview</button>
            <button class="nav-tab" onclick="showTab('core')">Core Concepts</button>
            <button class="nav-tab" onclick="showTab('modules')">Modules</button>
            <button class="nav-tab" onclick="showTab('tools')">Tools</button>
            <button class="nav-tab" onclick="showTab('patterns')">Patterns</button>
            <button class="nav-tab" onclick="showTab('best')">Best Practices</button>
        </div>

        <div class="content">
            <div id="overview" class="tab-content active">
                <h2>Node.js Process Management Overview</h2>
                <p>Node.js process management refers to how Node.js applications handle and control processes, enabling
                    you to create, monitor, and manage multiple processes for better performance, scalability, and
                    reliability.</p>

                <div class="highlight-box">
                    <strong>The Node.js Process Model</strong>
                    <p>Node.js runs JavaScript in a single thread with an event-driven, non-blocking I/O model. While
                        this is efficient for I/O-bound tasks, CPU-intensive operations can block the entire
                        application. Process management helps overcome this limitation.</p>
                </div>

                <h3>Why Process Management Matters</h3>
                <ul>
                    <li>Utilize multiple CPU cores for better performance</li>
                    <li>Isolate processes to prevent crashes from affecting the entire system</li>
                    <li>Handle CPU-intensive tasks without blocking the main thread</li>
                    <li>Achieve zero-downtime deployments</li>
                    <li>Automatic restart on failures</li>
                    <li>Load balancing across multiple instances</li>
                </ul>
            </div>

            <div id="core" class="tab-content">
                <h2>Core Process Management Concepts</h2>

                <h3>1. The `process` Object</h3>
                <p>Node.js provides a global process object that gives information and control over the current process:
                </p>
                <div class="code-block">
                    <span class="comment">// Get process information</span>
                    console.<span class="function">log</span>(process.pid); <span class="comment">// Process ID</span>
                    console.<span class="function">log</span>(process.version); <span class="comment">// Node.js
                        version</span>
                    console.<span class="function">log</span>(process.platform); <span class="comment">// Operating
                        system</span>
                    console.<span class="function">log</span>(process.<span class="function">uptime</span>()); <span
                        class="comment">// How long process has been running</span>
                    console.<span class="function">log</span>(process.<span class="function">memoryUsage</span>());
                    <span class="comment">// Memory consumption</span>
                </div>

                <h3>2. Child Processes Module</h3>
                <p>The child_process module allows you to spawn new processes and execute system commands:</p>

                <div class="highlight-box">
                    <strong>spawn() - Launches a new process</strong>
                    <div class="code-block">
                        <span class="keyword">const</span> { spawn } = <span class="function">require</span>(<span
                            class="string">'child_process'</span>);
                        <span class="keyword">const</span> ls = <span class="function">spawn</span>(<span
                            class="string">'ls'</span>, [<span class="string">'-lh'</span>, <span
                            class="string">'/usr'</span>]);

                        ls.stdout.<span class="function">on</span>(<span class="string">'data'</span>, (data) => {
                        console.<span class="function">log</span>(<span class="string">`Output: ${data}`</span>);
                        });
                    </div>
                </div>

                <div class="highlight-box">
                    <strong>exec() - Executes a command in a shell</strong>
                    <div class="code-block">
                        <span class="keyword">const</span> { exec } = <span class="function">require</span>(<span
                            class="string">'child_process'</span>);
                        <span class="function">exec</span>(<span class="string">'ls -lh'</span>, (error, stdout, stderr)
                        => {
                        <span class="keyword">if</span> (error) console.<span class="function">error</span>(error);
                        console.<span class="function">log</span>(stdout);
                        });
                    </div>
                </div>

                <div class="highlight-box">
                    <strong>fork() - Creates a new Node.js process</strong>
                    <div class="code-block">
                        <span class="keyword">const</span> { fork } = <span class="function">require</span>(<span
                            class="string">'child_process'</span>);
                        <span class="keyword">const</span> child = <span class="function">fork</span>(<span
                            class="string">'child.js'</span>);

                        child.<span class="function">send</span>({ msg: <span class="string">'Hello from parent'</span>
                        });
                        child.<span class="function">on</span>(<span class="string">'message'</span>, (msg) => {
                        console.<span class="function">log</span>(<span class="string">'Message from child:'</span>,
                        msg);
                        });
                    </div>
                </div>
            </div>

            <div id="modules" class="tab-content">
                <h2>Process Management Modules</h2>

                <h3>Cluster Module</h3>
                <p>The cluster module enables you to create multiple worker processes that share the same server port:
                </p>
                <div class="code-block">
                    <span class="keyword">const</span> cluster = <span class="function">require</span>(<span
                        class="string">'cluster'</span>);
                    <span class="keyword">const</span> http = <span class="function">require</span>(<span
                        class="string">'http'</span>);
                    <span class="keyword">const</span> numCPUs = <span class="function">require</span>(<span
                        class="string">'os'</span>).<span class="function">cpus</span>().length;

                    <span class="keyword">if</span> (cluster.isMaster) {
                    <span class="comment">// Fork workers</span>
                    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span
                        class="string">0</span>; i < numCPUs; i++) { cluster.<span class="function">fork</span>();
                        }

                        cluster.<span class="function">on</span>(<span class="string">'exit'</span>, (worker, code,
                        signal) => {
                        console.<span class="function">log</span>(<span class="string">`Worker ${worker.process.pid}
                            died`</span>);
                        cluster.<span class="function">fork</span>(); <span class="comment">// Restart worker</span>
                        });
                        } <span class="keyword">else</span> {
                        <span class="comment">// Workers share TCP connection</span>
                        http.<span class="function">createServer</span>((req, res) => {
                        res.<span class="function">writeHead</span>(<span class="string">200</span>);
                        res.<span class="function">end</span>(<span class="string">'Hello World\n'</span>);
                        }).<span class="function">listen</span>(<span class="string">8000</span>);
                        }
                </div>

                <h3>Worker Threads</h3>
                <p>For CPU-intensive tasks, worker threads provide true parallel execution:</p>
                <div class="code-block">
                    <span class="keyword">const</span> { Worker } = <span class="function">require</span>(<span
                        class="string">'worker_threads'</span>);

                    <span class="keyword">const</span> worker = <span class="keyword">new</span> <span
                        class="function">Worker</span>(<span class="string">'./worker.js'</span>, {
                    workerData: { value: <span class="string">5</span> }
                    });

                    worker.<span class="function">on</span>(<span class="string">'message'</span>, (result) => {
                    console.<span class="function">log</span>(<span class="string">'Result:'</span>, result);
                    });
                </div>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ðŸ”„ Cluster</h4>
                        <p>Multiple processes sharing server ports for web applications</p>
                    </div>
                    <div class="feature-card">
                        <h4>ðŸ‘¶ Child Process</h4>
                        <p>Spawn external commands and Node.js scripts</p>
                    </div>
                    <div class="feature-card">
                        <h4>âš¡ Worker Threads</h4>
                        <p>CPU-intensive tasks with parallel execution</p>
                    </div>
                    <div class="feature-card">
                        <h4>ðŸ“Š Process Object</h4>
                        <p>Monitor and control the current process</p>
                    </div>
                </div>
            </div>

            <div id="tools" class="tab-content">
                <h2>Process Management Tools</h2>

                <h3>PM2 (Process Manager 2)</h3>
                <p>The most popular production process manager for Node.js:</p>
                <div class="code-block">
                    pm2 start app.js -i max <span class="comment"># Start with max CPU cores</span>
                    pm2 list <span class="comment"># List all processes</span>
                    pm2 restart app <span class="comment"># Restart application</span>
                    pm2 stop app <span class="comment"># Stop application</span>
                    pm2 logs <span class="comment"># View logs</span>
                    pm2 monit <span class="comment"># Monitor CPU/Memory</span>
                </div>

                <div class="highlight-box">
                    <strong>PM2 Features:</strong>
                    <ul>
                        <li>Automatic restarts on crashes</li>
                        <li>Load balancing across multiple instances</li>
                        <li>Log management</li>
                        <li>Zero-downtime reloads</li>
                        <li>Startup scripts for server reboots</li>
                    </ul>
                </div>

                <h3>Forever</h3>
                <p>Simpler alternative to PM2:</p>
                <div class="code-block">
                    forever start app.js
                    forever list
                    forever stop app.js
                </div>

                <h3>nodemon (Development)</h3>
                <p>Auto-restarts app when files change during development:</p>
                <div class="code-block">
                    nodemon app.js
                </div>

                <h3>When to Use What</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Recommended Tool</th>
                            <th>Reason</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Simple applications, low traffic</td>
                            <td>Single Process</td>
                            <td>No need for complexity</td>
                        </tr>
                        <tr>
                            <td>Web servers with multiple CPUs</td>
                            <td>Cluster Mode</td>
                            <td>Maximize CPU utilization</td>
                        </tr>
                        <tr>
                            <td>Running external commands</td>
                            <td>Child Processes</td>
                            <td>Execute system scripts</td>
                        </tr>
                        <tr>
                            <td>CPU-intensive computations</td>
                            <td>Worker Threads</td>
                            <td>Parallel JavaScript execution</td>
                        </tr>
                        <tr>
                            <td>Production deployment</td>
                            <td>PM2/Forever</td>
                            <td>Reliability and monitoring</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div id="patterns" class="tab-content">
                <h2>Key Process Management Patterns</h2>

                <h3>1. Graceful Shutdown</h3>
                <p>Properly close connections and cleanup resources:</p>
                <div class="code-block">
                    process.<span class="function">on</span>(<span class="string">'SIGTERM'</span>, () => {
                    console.<span class="function">log</span>(<span class="string">'SIGTERM received, closing
                        server...'</span>);
                    server.<span class="function">close</span>(() => {
                    console.<span class="function">log</span>(<span class="string">'Server closed'</span>);
                    process.<span class="function">exit</span>(<span class="string">0</span>);
                    });
                    });
                </div>

                <h3>2. Error Handling</h3>
                <p>Catch uncaught exceptions and unhandled rejections:</p>
                <div class="code-block">
                    process.<span class="function">on</span>(<span class="string">'uncaughtException'</span>, (error) =>
                    {
                    console.<span class="function">error</span>(<span class="string">'Uncaught Exception:'</span>,
                    error);
                    process.<span class="function">exit</span>(<span class="string">1</span>);
                    });

                    process.<span class="function">on</span>(<span class="string">'unhandledRejection'</span>, (reason,
                    promise) => {
                    console.<span class="function">error</span>(<span class="string">'Unhandled Rejection at:'</span>,
                    promise, <span class="string">'reason:'</span>, reason);
                    });
                </div>

                <h3>3. Inter-Process Communication (IPC)</h3>
                <p>Enable processes to communicate with each other:</p>
                <div class="code-block">
                    <span class="comment">// Parent process</span>
                    <span class="keyword">const</span> child = <span class="function">fork</span>(<span
                        class="string">'child.js'</span>);
                    child.<span class="function">send</span>({ cmd: <span class="string">'start'</span>, data: [<span
                        class="string">1</span>,<span class="string">2</span>,<span class="string">3</span>] });

                    <span class="comment">// Child process (child.js)</span>
                    process.<span class="function">on</span>(<span class="string">'message'</span>, (msg) => {
                    console.<span class="function">log</span>(<span class="string">'Received:'</span>, msg);
                    process.<span class="function">send</span>({ result: <span class="string">'processed'</span> });
                    });
                </div>
            </div>

            <div id="best" class="tab-content">
                <h2>Best Practices</h2>

                <div class="best-practice">
                    <strong>1. Use cluster for web servers</strong>
                    <p>Maximize CPU utilization by running multiple worker processes.</p>
                </div>

                <div class="best-practice">
                    <strong>2. Implement health checks</strong>
                    <p>Monitor process status and automatically restart unhealthy processes.</p>
                </div>

                <div class="best-practice">
                    <strong>3. Set up automatic restarts</strong>
                    <p>Use PM2 or Forever to restart crashed processes automatically.</p>
                </div>

                <div class="best-practice">
                    <strong>4. Log process events</strong>
                    <p>Keep detailed logs for debugging and monitoring purposes.</p>
                </div>

                <div class="best-practice">
                    <strong>5. Handle signals properly</strong>
                    <p>Implement graceful shutdown for SIGTERM and SIGINT signals.</p>
                </div>

                <div class="best-practice">
                    <strong>6. Limit memory usage</strong>
                    <p>Prevent memory leaks from crashing the system by setting limits.</p>
                </div>

                <div class="best-practice">
                    <strong>7. Use environment variables</strong>
                    <p>Configure processes using environment variables for flexibility.</p>
                </div>

                <div class="highlight-box">
                    <strong>Key Takeaway</strong>
                    <p>Process management is crucial for building robust, scalable Node.js applications that can handle
                        production workloads efficiently and recover from failures automatically. Choose the right tool
                        and pattern based on your specific needs.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabId) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(tabId).classList.add('active');

            // Add active class to clicked tab
            event.target.classList.add('active');
        }
    </script>
</body>

</html>